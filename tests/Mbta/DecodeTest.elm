module Mbta.DecodeTest exposing (suite)

import DecodeHelpers
import Expect
import Json.Decode
import JsonApi
import Mbta exposing (..)
import Mbta.Decode
import Mbta.Mixed as Mixed
import Test exposing (..)


testOne : String -> String -> String -> JsonApi.ResourceDecoder a -> Test
testOne description url json resourceDecoder =
    test description <|
        \() ->
            json
                |> JsonApi.decodeDocumentString (JsonApi.documentDecoderOne includedDecoder resourceDecoder)
                |> Expect.ok


testMany : String -> String -> String -> JsonApi.ResourceDecoder a -> Test
testMany description url json resourceDecoder =
    test description <|
        \() ->
            json
                |> JsonApi.decodeDocumentString (JsonApi.documentDecoderMany includedDecoder resourceDecoder)
                |> Expect.ok


includedDecoder : JsonApi.IncludedDecoder Mixed.Mixed
includedDecoder =
    { emptyIncluded = Mixed.empty
    , accumulator = Mixed.insert
    }


suite : Test
suite =
    describe "Mbta.Decode"
        -- Realtime Data
        [ describe "prediction"
            [ testMany
                "plain"
                "https://api-v3.mbta.com/predictions?filter[stop]=place-sstat&filter[direction_id]=0&filter[route]=CR-Worcester,743"
                """
                {"data":[{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:58:33-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640837-74611-1","relationships":{"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640837","type":"trip"}},"vehicle":{"data":{"id":"y1113","type":"vehicle"}}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:59:00-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640832-74611-1","relationships":{"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640832","type":"trip"}},"vehicle":{"data":{"id":"block_S743-66_schedBasedVehicle","type":"vehicle"}}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T17:15:11-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640765-74611-1","relationships":{"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640765","type":"trip"}},"vehicle":{"data":{"id":"y1108","type":"vehicle"}}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:33:40-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640724-74611-1","relationships":{"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640724","type":"trip"}},"vehicle":{"data":{"id":"y1116","type":"vehicle"}}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:38:30-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640695-74611-1","relationships":{"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640695","type":"trip"}},"vehicle":{"data":{"id":"y1118","type":"vehicle"}}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:47:33-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640672-74611-1","relationships":{"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640672","type":"trip"}},"vehicle":{"data":{"id":"y1102","type":"vehicle"}}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T17:08:54-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640482-74611-1","relationships":{"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640482","type":"trip"}},"vehicle":{"data":{"id":"block_S746-75_schedBasedVehicle","type":"vehicle"}}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:20:00-04:00","direction_id":0,"schedule_relationship":null,"status":"All aboard","stop_sequence":1,"track":"4"},"id":"prediction-CR-Sunday-Spring-19-2511-South Station-04-1","relationships":{"route":{"data":{"id":"CR-Worcester","type":"route"}},"stop":{"data":{"id":"South Station","type":"stop"}},"trip":{"data":{"id":"CR-Sunday-Spring-19-2511","type":"trip"}},"vehicle":{"data":{"id":"1817","type":"vehicle"}}},"type":"prediction"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.prediction
            , testMany
                "with includes"
                "https://api-v3.mbta.com/predictions?filter[stop]=place-sstat&filter[direction_id]=0&filter[route]=CR-Worcester,743&include=schedule,stop,route,trip,vehicle,alerts"
                """
                {"data":[{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:58:33-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640837-74611-1","relationships":{"alerts":{"data":[]},"route":{"data":{"id":"743","type":"route"}},"schedule":{"data":{"id":"schedule-40640837-74611-1","type":"schedule"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640837","type":"trip"}},"vehicle":{"data":{"id":"y1113","type":"vehicle"}}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:59:00-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640832-74611-1","relationships":{"alerts":{"data":[]},"route":{"data":{"id":"743","type":"route"}},"schedule":{"data":{"id":"schedule-40640832-74611-1","type":"schedule"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640832","type":"trip"}},"vehicle":{"data":null}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T17:15:11-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640765-74611-1","relationships":{"alerts":{"data":[]},"route":{"data":{"id":"743","type":"route"}},"schedule":{"data":{"id":"schedule-40640765-74611-1","type":"schedule"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640765","type":"trip"}},"vehicle":{"data":{"id":"y1108","type":"vehicle"}}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:33:40-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640724-74611-1","relationships":{"alerts":{"data":[]},"route":{"data":{"id":"743","type":"route"}},"schedule":{"data":{"id":"schedule-40640724-74611-1","type":"schedule"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640724","type":"trip"}},"vehicle":{"data":{"id":"y1116","type":"vehicle"}}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:38:30-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640695-74611-1","relationships":{"alerts":{"data":[]},"route":{"data":{"id":"743","type":"route"}},"schedule":{"data":{"id":"schedule-40640695-74611-1","type":"schedule"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640695","type":"trip"}},"vehicle":{"data":{"id":"y1118","type":"vehicle"}}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:47:33-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640672-74611-1","relationships":{"alerts":{"data":[]},"route":{"data":{"id":"743","type":"route"}},"schedule":{"data":{"id":"schedule-40640672-74611-1","type":"schedule"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640672","type":"trip"}},"vehicle":{"data":{"id":"y1102","type":"vehicle"}}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T17:08:54-04:00","direction_id":0,"schedule_relationship":null,"status":null,"stop_sequence":1,"track":null},"id":"prediction-40640482-74611-1","relationships":{"alerts":{"data":[]},"route":{"data":{"id":"743","type":"route"}},"schedule":{"data":{"id":"schedule-40640482-74611-1","type":"schedule"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640482","type":"trip"}},"vehicle":{"data":null}},"type":"prediction"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:20:00-04:00","direction_id":0,"schedule_relationship":null,"status":"All aboard","stop_sequence":1,"track":"4"},"id":"prediction-CR-Sunday-Spring-19-2511-South Station-04-1","relationships":{"alerts":{"data":[]},"route":{"data":{"id":"CR-Worcester","type":"route"}},"schedule":{"data":{"id":"schedule-CR-Sunday-Spring-19-2511-South Station-1","type":"schedule"}},"stop":{"data":{"id":"South Station","type":"stop"}},"trip":{"data":{"id":"CR-Sunday-Spring-19-2511","type":"trip"}},"vehicle":{"data":{"id":"1817","type":"vehicle"}}},"type":"prediction"}],"included":[{"attributes":{"bearing":206.0,"current_status":"STOPPED_AT","current_stop_sequence":1,"direction_id":0,"label":"1817","last_updated":"2019-08-04T16:18:18-04:00","latitude":42.34968185424805,"longitude":-71.05580139160156,"speed":null,"updated_at":"2019-08-04T16:18:18-04:00"},"id":"1817","links":{"self":"/vehicles/1817"},"relationships":{"route":{"data":{"id":"CR-Worcester","type":"route"}},"stop":{"data":{"id":"South Station-04","type":"stop"}},"trip":{"data":{"id":"CR-Sunday-Spring-19-2511","type":"trip"}}},"type":"vehicle"},{"attributes":{"bikes_allowed":1,"block_id":"S746-75","direction_id":0,"headsign":"Silver Line Way","name":"","wheelchair_accessible":1},"id":"40640482","links":{"self":"/trips/40640482"},"relationships":{"route":{"data":{"id":"746","type":"route"}},"route_pattern":{"data":{"id":"746-_-0","type":"route_pattern"}},"service":{"data":{"id":"BUS319-L-Su-02","type":"service"}},"shape":{"data":{"id":"7460007","type":"shape"}},"vehicle":{"data":null}},"type":"trip"},{"attributes":{"bikes_allowed":1,"block_id":"S743-74","direction_id":0,"headsign":"Chelsea","name":"","wheelchair_accessible":1},"id":"40640672","links":{"self":"/trips/40640672"},"relationships":{"route":{"data":{"id":"743","type":"route"}},"route_pattern":{"data":{"id":"743-_-0","type":"route_pattern"}},"service":{"data":{"id":"BUS319-L-Su-02","type":"service"}},"shape":{"data":{"id":"7430008","type":"shape"}},"vehicle":{"data":null}},"type":"trip"},{"attributes":{"bikes_allowed":1,"block_id":"S743-73","direction_id":0,"headsign":"Chelsea","name":"","wheelchair_accessible":1},"id":"40640695","links":{"self":"/trips/40640695"},"relationships":{"route":{"data":{"id":"743","type":"route"}},"route_pattern":{"data":{"id":"743-_-0","type":"route_pattern"}},"service":{"data":{"id":"BUS319-L-Su-02","type":"service"}},"shape":{"data":{"id":"7430008","type":"shape"}},"vehicle":{"data":null}},"type":"trip"},{"attributes":{"bikes_allowed":1,"block_id":"S743-69","direction_id":0,"headsign":"Chelsea","name":"","wheelchair_accessible":1},"id":"40640724","links":{"self":"/trips/40640724"},"relationships":{"route":{"data":{"id":"743","type":"route"}},"route_pattern":{"data":{"id":"743-_-0","type":"route_pattern"}},"service":{"data":{"id":"BUS319-L-Su-02","type":"service"}},"shape":{"data":{"id":"7430008","type":"shape"}},"vehicle":{"data":null}},"type":"trip"},{"attributes":{"bikes_allowed":1,"block_id":"S743-68","direction_id":0,"headsign":"Chelsea","name":"","wheelchair_accessible":1},"id":"40640765","links":{"self":"/trips/40640765"},"relationships":{"route":{"data":{"id":"743","type":"route"}},"route_pattern":{"data":{"id":"743-_-0","type":"route_pattern"}},"service":{"data":{"id":"BUS319-L-Su-02","type":"service"}},"shape":{"data":{"id":"7430008","type":"shape"}},"vehicle":{"data":null}},"type":"trip"},{"attributes":{"bikes_allowed":1,"block_id":"S743-66","direction_id":0,"headsign":"Chelsea","name":"","wheelchair_accessible":1},"id":"40640832","links":{"self":"/trips/40640832"},"relationships":{"route":{"data":{"id":"743","type":"route"}},"route_pattern":{"data":{"id":"743-_-0","type":"route_pattern"}},"service":{"data":{"id":"BUS319-L-Su-02","type":"service"}},"shape":{"data":{"id":"7430008","type":"shape"}},"vehicle":{"data":null}},"type":"trip"},{"attributes":{"bikes_allowed":1,"block_id":"S743-65","direction_id":0,"headsign":"Silver Line Way","name":"","wheelchair_accessible":1},"id":"40640837","links":{"self":"/trips/40640837"},"relationships":{"route":{"data":{"id":"746","type":"route"}},"route_pattern":{"data":{"id":"746-_-0","type":"route_pattern"}},"service":{"data":{"id":"BUS319-L-Su-02","type":"service"}},"shape":{"data":{"id":"7460007","type":"shape"}},"vehicle":{"data":null}},"type":"trip"},{"attributes":{"color":"7C878E","description":"Key Bus","direction_destinations":["Chelsea","South Station"],"direction_names":["Outbound","Inbound"],"fare_class":"Rapid Transit","long_name":"Chelsea - South Station","short_name":"SL3","sort_order":10053,"text_color":"FFFFFF","type":3},"id":"743","links":{"self":"/routes/743"},"relationships":{"line":{"data":{"id":"line-SLWaterfront","type":"line"}},"route_patterns":{}},"type":"route"},{"attributes":{"address":null,"at_street":null,"description":"South Station - Silver Line - Airport/Design Center/Chelsea","latitude":42.352271,"location_type":0,"longitude":-71.055242,"municipality":"Boston","name":"South Station","on_street":null,"platform_code":null,"platform_name":"Airport/Design Center/Chelsea","vehicle_type":3,"wheelchair_boarding":1},"id":"74611","links":{"self":"/stops/74611"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=74611"}},"parent_station":{"data":{"id":"place-sstat","type":"stop"}},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"bikes_allowed":1,"block_id":"","direction_id":0,"headsign":"Worcester","name":"2511","wheelchair_accessible":1},"id":"CR-Sunday-Spring-19-2511","links":{"self":"/trips/CR-Sunday-Spring-19-2511"},"relationships":{"route":{"data":{"id":"CR-Worcester","type":"route"}},"route_pattern":{"data":{"id":"CR-Worcester-0-0","type":"route_pattern"}},"service":{"data":{"id":"CR-Su-Worcester-Spr-19","type":"service"}},"shape":{"data":{"id":"9850002","type":"shape"}},"vehicle":{"data":{"id":"1817","type":"vehicle"}}},"type":"trip"},{"attributes":{"color":"80276C","description":"Commuter Rail","direction_destinations":["Worcester","South Station"],"direction_names":["Outbound","Inbound"],"fare_class":"Commuter Rail","long_name":"Framingham/Worcester Line","short_name":"","sort_order":20003,"text_color":"FFFFFF","type":2},"id":"CR-Worcester","links":{"self":"/routes/CR-Worcester"},"relationships":{"line":{"data":{"id":"line-Worcester","type":"line"}},"route_patterns":{}},"type":"route"},{"attributes":{"address":null,"at_street":null,"description":"South Station - Commuter Rail","latitude":42.351763,"location_type":0,"longitude":-71.054797,"municipality":"Boston","name":"South Station","on_street":null,"platform_code":null,"platform_name":"Commuter Rail","vehicle_type":2,"wheelchair_boarding":1},"id":"South Station","links":{"self":"/stops/South%20Station"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=South%20Station"}},"parent_station":{"data":{"id":"place-sstat","type":"stop"}},"recommended_transfers":{},"zone":{"data":{"id":"CR-zone-1A","type":"zone"}}},"type":"stop"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T17:01:00-04:00","direction_id":0,"drop_off_type":1,"pickup_type":0,"stop_sequence":1,"timepoint":true},"id":"schedule-40640482-74611-1","relationships":{"prediction":{},"route":{"data":{"id":"746","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640482","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:44:00-04:00","direction_id":0,"drop_off_type":1,"pickup_type":0,"stop_sequence":1,"timepoint":true},"id":"schedule-40640672-74611-1","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640672","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:29:00-04:00","direction_id":0,"drop_off_type":1,"pickup_type":0,"stop_sequence":1,"timepoint":true},"id":"schedule-40640695-74611-1","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640695","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:14:00-04:00","direction_id":0,"drop_off_type":1,"pickup_type":0,"stop_sequence":1,"timepoint":true},"id":"schedule-40640724-74611-1","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640724","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T17:14:00-04:00","direction_id":0,"drop_off_type":1,"pickup_type":0,"stop_sequence":1,"timepoint":true},"id":"schedule-40640765-74611-1","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640765","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:59:00-04:00","direction_id":0,"drop_off_type":1,"pickup_type":0,"stop_sequence":1,"timepoint":true},"id":"schedule-40640832-74611-1","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640832","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:58:00-04:00","direction_id":0,"drop_off_type":1,"pickup_type":0,"stop_sequence":1,"timepoint":true},"id":"schedule-40640837-74611-1","relationships":{"prediction":{},"route":{"data":{"id":"746","type":"route"}},"stop":{"data":{"id":"74611","type":"stop"}},"trip":{"data":{"id":"40640837","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":null,"departure_time":"2019-08-04T16:20:00-04:00","direction_id":0,"drop_off_type":1,"pickup_type":0,"stop_sequence":1,"timepoint":true},"id":"schedule-CR-Sunday-Spring-19-2511-South Station-1","relationships":{"prediction":{},"route":{"data":{"id":"CR-Worcester","type":"route"}},"stop":{"data":{"id":"South Station","type":"stop"}},"trip":{"data":{"id":"CR-Sunday-Spring-19-2511","type":"trip"}}},"type":"schedule"},{"attributes":{"bearing":0.0,"current_status":"IN_TRANSIT_TO","current_stop_sequence":4,"direction_id":1,"label":"1102","last_updated":"2019-08-04T16:18:31-04:00","latitude":42.38839340209961,"longitude":-71.02404022216797,"speed":null,"updated_at":"2019-08-04T16:18:31-04:00"},"id":"y1102","links":{"self":"/vehicles/y1102"},"relationships":{"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74636","type":"stop"}},"trip":{"data":{"id":"40640674","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":0.0,"current_status":"IN_TRANSIT_TO","current_stop_sequence":5,"direction_id":0,"label":"1108","last_updated":"2019-08-04T16:18:33-04:00","latitude":42.3507194519043,"longitude":-71.03054809570313,"speed":null,"updated_at":"2019-08-04T16:18:33-04:00"},"id":"y1108","links":{"self":"/vehicles/y1108"},"relationships":{"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7096","type":"stop"}},"trip":{"data":{"id":"40640788","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":304.0,"current_status":"IN_TRANSIT_TO","current_stop_sequence":7,"direction_id":0,"label":"1113","last_updated":"2019-08-04T16:18:35-04:00","latitude":42.394100189208984,"longitude":-71.02848052978516,"speed":null,"updated_at":"2019-08-04T16:18:35-04:00"},"id":"y1113","links":{"self":"/vehicles/y1113"},"relationships":{"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"74635","type":"stop"}},"trip":{"data":{"id":"40640824","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":0.0,"current_status":"IN_TRANSIT_TO","current_stop_sequence":6,"direction_id":1,"label":"1116","last_updated":"2019-08-04T16:18:31-04:00","latitude":42.346927642822266,"longitude":-71.03675079345703,"speed":null,"updated_at":"2019-08-04T16:18:31-04:00"},"id":"y1116","links":{"self":"/vehicles/y1116"},"relationships":{"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"17096","type":"stop"}},"trip":{"data":{"id":"40640742","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":180.0,"current_status":"IN_TRANSIT_TO","current_stop_sequence":6,"direction_id":1,"label":"1118","last_updated":"2019-08-04T16:14:24-04:00","latitude":42.36555099487305,"longitude":-71.02521514892578,"speed":null,"updated_at":"2019-08-04T16:14:24-04:00"},"id":"y1118","links":{"self":"/vehicles/y1118"},"relationships":{"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"17096","type":"stop"}},"trip":{"data":{"id":"40640707","type":"trip"}}},"type":"vehicle"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.prediction
            ]
        , describe "vehicle"
            [ testOne
                "red line vehicle"
                "https://api-v3.mbta.com/vehicles/R-545EFD0A"
                """
                {"data":{"attributes":{"bearing":130.0,"current_status":"STOPPED_AT","current_stop_sequence":70,"direction_id":0,"label":"1511","last_updated":"2019-08-04T16:17:34-04:00","latitude":42.35647964477539,"longitude":-71.06265258789063,"speed":null,"updated_at":"2019-08-04T16:17:34-04:00"},"id":"R-545EFD0A","links":{"self":"/vehicles/R-545EFD0A"},"relationships":{"route":{"data":{"id":"Red","type":"route"}},"stop":{"data":{"id":"70075","type":"stop"}},"trip":{"data":{"id":"ADDED-1564670779","type":"trip"}}},"type":"vehicle"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.vehicle
            , testOne
                "red line vehicle with includes"
                "https://api-v3.mbta.com/vehicles/R-545EFD0A?include=trip,stop,route"
                """
                {"data":{"attributes":{"bearing":130.0,"current_status":"STOPPED_AT","current_stop_sequence":70,"direction_id":0,"label":"1511","last_updated":"2019-08-04T16:17:34-04:00","latitude":42.35647964477539,"longitude":-71.06265258789063,"speed":null,"updated_at":"2019-08-04T16:17:34-04:00"},"id":"R-545EFD0A","links":{"self":"/vehicles/R-545EFD0A"},"relationships":{"route":{"data":{"id":"Red","type":"route"}},"stop":{"data":{"id":"70075","type":"stop"}},"trip":{"data":{"id":"ADDED-1564670779","type":"trip"}}},"type":"vehicle"},"included":[{"attributes":{"address":null,"at_street":null,"description":"Park Street - Red Line - Ashmont/Braintree","latitude":42.356395,"location_type":0,"longitude":-71.062424,"municipality":"Boston","name":"Park Street","on_street":null,"platform_code":"5","platform_name":"Ashmont/Braintree","vehicle_type":1,"wheelchair_boarding":1},"id":"70075","links":{"self":"/stops/70075"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=70075"}},"parent_station":{"data":{"id":"place-pktrm","type":"stop"}},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"bikes_allowed":0,"block_id":null,"direction_id":0,"headsign":"Ashmont","name":"","wheelchair_accessible":0},"id":"ADDED-1564670779","links":{"self":"/trips/ADDED-1564670779"},"relationships":{"route":{"data":{"id":"Red","type":"route"}},"route_pattern":{"data":null},"service":{"data":null},"shape":{"data":null}},"type":"trip"},{"attributes":{"color":"DA291C","description":"Rapid Transit","direction_destinations":["Ashmont/Braintree","Alewife"],"direction_names":["South","North"],"fare_class":"Rapid Transit","long_name":"Red Line","short_name":"","sort_order":10010,"text_color":"FFFFFF","type":1},"id":"Red","links":{"self":"/routes/Red"},"relationships":{"line":{"data":{"id":"line-Red","type":"line"}},"route_patterns":{}},"type":"route"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.vehicle
            , testOne
                "bus"
                "https://api-v3.mbta.com/vehicles/y0759"
                """
                {"data":{"attributes":{"bearing":0.0,"current_status":"IN_TRANSIT_TO","current_stop_sequence":41,"direction_id":0,"label":"0759","last_updated":"2019-08-04T16:18:35-04:00","latitude":42.217899322509766,"longitude":-70.93684387207031,"speed":null,"updated_at":"2019-08-04T16:18:35-04:00"},"id":"y0759","links":{"self":"/vehicles/y0759"},"relationships":{"route":{"data":{"id":"222","type":"route"}},"stop":{"data":{"id":"3675","type":"stop"}},"trip":{"data":{"id":"40761308","type":"trip"}}},"type":"vehicle"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.vehicle
            , testOne
                "commuter rail"
                "https://api-v3.mbta.com/vehicles/1804"
                """
                {"data":{"attributes":{"bearing":93.0,"current_status":"STOPPED_AT","current_stop_sequence":1,"direction_id":1,"label":"1804","last_updated":"2019-08-04T16:18:27-04:00","latitude":42.26139831542969,"longitude":-71.79334259033203,"speed":null,"updated_at":"2019-08-04T16:18:27-04:00"},"id":"1804","links":{"self":"/vehicles/1804"},"relationships":{"route":{"data":{"id":"CR-Worcester","type":"route"}},"stop":{"data":{"id":"Worcester","type":"stop"}},"trip":{"data":{"id":"CR-Sunday-Spring-19-2510","type":"trip"}}},"type":"vehicle"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.vehicle
            , testMany
                "multiple"
                "https://api-v3.mbta.com/vehicles?filter[route]=83,CR-Worcester,Green-B,Orange"
                """
                {"data":[{"attributes":{"bearing":201.0,"current_status":"IN_TRANSIT_TO","current_stop_sequence":25,"direction_id":0,"label":"0682","last_updated":"2019-08-04T16:18:35-04:00","latitude":42.39424514770508,"longitude":-71.13797760009766,"speed":null,"updated_at":"2019-08-04T16:18:35-04:00"},"id":"y0682","links":{"self":"/vehicles/y0682"},"relationships":{"route":{"data":{"id":"83","type":"route"}},"stop":{"data":{"id":"2425","type":"stop"}},"trip":{"data":{"id":"40537784","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":206.0,"current_status":"STOPPED_AT","current_stop_sequence":1,"direction_id":0,"label":"1817","last_updated":"2019-08-04T16:18:18-04:00","latitude":42.34968185424805,"longitude":-71.05580139160156,"speed":null,"updated_at":"2019-08-04T16:18:18-04:00"},"id":"1817","links":{"self":"/vehicles/1817"},"relationships":{"route":{"data":{"id":"CR-Worcester","type":"route"}},"stop":{"data":{"id":"South Station-04","type":"stop"}},"trip":{"data":{"id":"CR-Sunday-Spring-19-2511","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":93.0,"current_status":"STOPPED_AT","current_stop_sequence":1,"direction_id":1,"label":"1804","last_updated":"2019-08-04T16:18:27-04:00","latitude":42.26139831542969,"longitude":-71.79334259033203,"speed":null,"updated_at":"2019-08-04T16:18:27-04:00"},"id":"1804","links":{"self":"/vehicles/1804"},"relationships":{"route":{"data":{"id":"CR-Worcester","type":"route"}},"stop":{"data":{"id":"Worcester","type":"stop"}},"trip":{"data":{"id":"CR-Sunday-Spring-19-2510","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":315.0,"current_status":"INCOMING_AT","current_stop_sequence":150,"direction_id":0,"label":"3655-3834","last_updated":"2019-08-04T16:18:35-04:00","latitude":42.34941864013672,"longitude":-71.10140228271484,"speed":null,"updated_at":"2019-08-04T16:18:35-04:00"},"id":"G-10101","links":{"self":"/vehicles/G-10101"},"relationships":{"route":{"data":{"id":"Green-B","type":"route"}},"stop":{"data":{"id":"70147","type":"stop"}},"trip":{"data":{"id":"40822082-ClevelandCircleKenmore","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":315.0,"current_status":"STOPPED_AT","current_stop_sequence":180,"direction_id":0,"label":"3618-3869","last_updated":"2019-08-04T16:18:33-04:00","latitude":42.351200103759766,"longitude":-71.1163330078125,"speed":null,"updated_at":"2019-08-04T16:18:33-04:00"},"id":"G-10098","links":{"self":"/vehicles/G-10098"},"relationships":{"route":{"data":{"id":"Green-B","type":"route"}},"stop":{"data":{"id":"70141","type":"stop"}},"trip":{"data":{"id":"40822081-ClevelandCircleKenmore","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":225.0,"current_status":"INCOMING_AT","current_stop_sequence":280,"direction_id":0,"label":"3888-3691","last_updated":"2019-08-04T16:18:35-04:00","latitude":42.34117889404297,"longitude":-71.15003204345703,"speed":null,"updated_at":"2019-08-04T16:18:35-04:00"},"id":"G-10097","links":{"self":"/vehicles/G-10097"},"relationships":{"route":{"data":{"id":"Green-B","type":"route"}},"stop":{"data":{"id":"70115","type":"stop"}},"trip":{"data":{"id":"40822079-ClevelandCircleKenmore","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":45.0,"current_status":"INCOMING_AT","current_stop_sequence":30,"direction_id":1,"label":"3605-3885","last_updated":"2019-08-04T16:18:37-04:00","latitude":42.33938980102539,"longitude":-71.15218353271484,"speed":null,"updated_at":"2019-08-04T16:18:37-04:00"},"id":"G-10085","links":{"self":"/vehicles/G-10085"},"relationships":{"route":{"data":{"id":"Green-B","type":"route"}},"stop":{"data":{"id":"70114","type":"stop"}},"trip":{"data":{"id":"ADDED-1564670840","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":240.0,"current_status":"IN_TRANSIT_TO","current_stop_sequence":120,"direction_id":0,"label":"3652-3871","last_updated":"2019-08-04T16:18:28-04:00","latitude":42.34996032714844,"longitude":-71.07791900634766,"speed":null,"updated_at":"2019-08-04T16:18:28-04:00"},"id":"G-10083","links":{"self":"/vehicles/G-10083"},"relationships":{"route":{"data":{"id":"Green-B","type":"route"}},"stop":{"data":{"id":"70153","type":"stop"}},"trip":{"data":{"id":"40822083-ClevelandCircleKenmore","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":135.0,"current_status":"STOPPED_AT","current_stop_sequence":170,"direction_id":1,"label":"3604-3887","last_updated":"2019-08-04T16:18:16-04:00","latitude":42.349178314208984,"longitude":-71.10005950927734,"speed":null,"updated_at":"2019-08-04T16:18:16-04:00"},"id":"G-10080","links":{"self":"/vehicles/G-10080"},"relationships":{"route":{"data":{"id":"Green-B","type":"route"}},"stop":{"data":{"id":"70148","type":"stop"}},"trip":{"data":{"id":"ADDED-1564670818","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":35.0,"current_status":"STOPPED_AT","current_stop_sequence":610,"direction_id":1,"label":"3865-3663","last_updated":"2019-08-04T16:18:20-04:00","latitude":42.35926818847656,"longitude":-71.0594482421875,"speed":null,"updated_at":"2019-08-04T16:18:20-04:00"},"id":"G-10076","links":{"self":"/vehicles/G-10076"},"relationships":{"route":{"data":{"id":"Green-B","type":"route"}},"stop":{"data":{"id":"70201","type":"stop"}},"trip":{"data":{"id":"ADDED-1564670813","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":135.0,"current_status":"STOPPED_AT","current_stop_sequence":110,"direction_id":1,"label":"3685-3863","last_updated":"2019-08-04T16:18:12-04:00","latitude":42.351810455322266,"longitude":-71.12181091308594,"speed":null,"updated_at":"2019-08-04T16:18:12-04:00"},"id":"G-10069","links":{"self":"/vehicles/G-10069"},"relationships":{"route":{"data":{"id":"Green-B","type":"route"}},"stop":{"data":{"id":"70136","type":"stop"}},"trip":{"data":{"id":"ADDED-1564670822","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":105.0,"current_status":"IN_TRANSIT_TO","current_stop_sequence":570,"direction_id":1,"label":"3606-3892","last_updated":"2019-08-04T16:18:31-04:00","latitude":42.34788131713867,"longitude":-71.08627319335938,"speed":null,"updated_at":"2019-08-04T16:18:31-04:00"},"id":"G-10067","links":{"self":"/vehicles/G-10067"},"relationships":{"route":{"data":{"id":"Green-B","type":"route"}},"stop":{"data":{"id":"70154","type":"stop"}},"trip":{"data":{"id":"ADDED-1564670817","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":0.0,"current_status":"STOPPED_AT","current_stop_sequence":60,"direction_id":1,"label":"3850-3683","last_updated":"2019-08-04T16:17:10-04:00","latitude":42.348201751708984,"longitude":-71.1405029296875,"speed":null,"updated_at":"2019-08-04T16:17:10-04:00"},"id":"G-10002","links":{"self":"/vehicles/G-10002"},"relationships":{"route":{"data":{"id":"Green-B","type":"route"}},"stop":{"data":{"id":"70124","type":"stop"}},"trip":{"data":{"id":"ADDED-1564670831","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":25.0,"current_status":"IN_TRANSIT_TO","current_stop_sequence":20,"direction_id":1,"label":"1268","last_updated":"2019-08-04T16:18:14-04:00","latitude":42.31184005737305,"longitude":-71.10669708251953,"speed":null,"updated_at":"2019-08-04T16:18:14-04:00"},"id":"O-545EFBB4","links":{"self":"/vehicles/O-545EFBB4"},"relationships":{"route":{"data":{"id":"Orange","type":"route"}},"stop":{"data":{"id":"70005","type":"stop"}},"trip":{"data":{"id":"40609672","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":40.0,"current_status":"INCOMING_AT","current_stop_sequence":70,"direction_id":1,"label":"1229","last_updated":"2019-08-04T16:18:16-04:00","latitude":42.34257125854492,"longitude":-71.08191680908203,"speed":null,"updated_at":"2019-08-04T16:18:16-04:00"},"id":"O-545EFBAE","links":{"self":"/vehicles/O-545EFBAE"},"relationships":{"route":{"data":{"id":"Orange","type":"route"}},"stop":{"data":{"id":"70015","type":"stop"}},"trip":{"data":{"id":"40609671","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":357.0,"current_status":"STOPPED_AT","current_stop_sequence":170,"direction_id":1,"label":"1200","last_updated":"2019-08-04T16:18:11-04:00","latitude":42.401611328125,"longitude":-71.07713317871094,"speed":null,"updated_at":"2019-08-04T16:18:11-04:00"},"id":"O-545EFBAA","links":{"self":"/vehicles/O-545EFBAA"},"relationships":{"route":{"data":{"id":"Orange","type":"route"}},"stop":{"data":{"id":"70033","type":"stop"}},"trip":{"data":{"id":"40609669","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":200.0,"current_status":"STOPPED_AT","current_stop_sequence":10,"direction_id":0,"label":"1280","last_updated":"2019-08-04T16:18:06-04:00","latitude":42.42673110961914,"longitude":-71.07437896728516,"speed":null,"updated_at":"2019-08-04T16:18:06-04:00"},"id":"O-545EFBA4","links":{"self":"/vehicles/O-545EFBA4"},"relationships":{"route":{"data":{"id":"Orange","type":"route"}},"stop":{"data":{"id":"70034","type":"stop"}},"trip":{"data":{"id":"40609770","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":215.0,"current_status":"STOPPED_AT","current_stop_sequence":150,"direction_id":0,"label":"1297","last_updated":"2019-08-04T16:18:06-04:00","latitude":42.330780029296875,"longitude":-71.09613037109375,"speed":null,"updated_at":"2019-08-04T16:18:06-04:00"},"id":"O-545EF880","links":{"self":"/vehicles/O-545EF880"},"relationships":{"route":{"data":{"id":"Orange","type":"route"}},"stop":{"data":{"id":"70008","type":"stop"}},"trip":{"data":{"id":"ADDED-1564670820","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":330.0,"current_status":"STOPPED_AT","current_stop_sequence":130,"direction_id":1,"label":"1227","last_updated":"2019-08-04T16:18:26-04:00","latitude":42.36513900756836,"longitude":-71.05998992919922,"speed":null,"updated_at":"2019-08-04T16:18:26-04:00"},"id":"O-545EF731","links":{"self":"/vehicles/O-545EF731"},"relationships":{"route":{"data":{"id":"Orange","type":"route"}},"stop":{"data":{"id":"70027","type":"stop"}},"trip":{"data":{"id":"40609670","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":120.0,"current_status":"STOPPED_AT","current_stop_sequence":50,"direction_id":0,"label":"1262","last_updated":"2019-08-04T16:17:58-04:00","latitude":42.37376022338867,"longitude":-71.0704116821289,"speed":null,"updated_at":"2019-08-04T16:17:58-04:00"},"id":"O-545EF724","links":{"self":"/vehicles/O-545EF724"},"relationships":{"route":{"data":{"id":"Orange","type":"route"}},"stop":{"data":{"id":"70028","type":"stop"}},"trip":{"data":{"id":"40609762","type":"trip"}}},"type":"vehicle"},{"attributes":{"bearing":205.0,"current_status":"STOPPED_AT","current_stop_sequence":90,"direction_id":0,"label":"1254","last_updated":"2019-08-04T16:18:38-04:00","latitude":42.35538101196289,"longitude":-71.06065368652344,"speed":null,"updated_at":"2019-08-04T16:18:38-04:00"},"id":"O-545EF171","links":{"self":"/vehicles/O-545EF171"},"relationships":{"route":{"data":{"id":"Orange","type":"route"}},"stop":{"data":{"id":"70020","type":"stop"}},"trip":{"data":{"id":"ADDED-1564670832","type":"trip"}}},"type":"vehicle"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.vehicle
            ]

        -- Schedule Data
        , describe "route"
            [ testOne
                "bus"
                "/routes/741"
                """
                {"data":{"attributes":{"color":"7C878E","description":"Key Bus","direction_destinations":["Logan Airport","South Station"],"direction_names":["Outbound","Inbound"],"fare_class":"Rapid Transit","long_name":"Logan Airport - South Station","short_name":"SL1","sort_order":10051,"text_color":"FFFFFF","type":3},"id":"741","links":{"self":"/routes/741"},"relationships":{"line":{"data":{"id":"line-SLWaterfront","type":"line"}},"route_patterns":{}},"type":"route"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.route
            , testOne
                "subway"
                "/routes/Blue"
                """
                {"data":{"attributes":{"color":"003DA5","description":"Rapid Transit","direction_destinations":["Bowdoin","Wonderland"],"direction_names":["West","East"],"fare_class":"Rapid Transit","long_name":"Blue Line","short_name":"","sort_order":10040,"text_color":"FFFFFF","type":1},"id":"Blue","links":{"self":"/routes/Blue"},"relationships":{"line":{"data":{"id":"line-Blue","type":"line"}},"route_patterns":{}},"type":"route"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.route
            , testOne
                "commuter rail"
                "/routes/CR-Franklin"
                """
                {"data":{"attributes":{"color":"80276C","description":"Commuter Rail","direction_destinations":["Forge Park/495","South Station"],"direction_names":["Outbound","Inbound"],"fare_class":"Commuter Rail","long_name":"Franklin Line","short_name":"","sort_order":20004,"text_color":"FFFFFF","type":2},"id":"CR-Franklin","links":{"self":"/routes/CR-Franklin"},"relationships":{"line":{"data":{"id":"line-Franklin","type":"line"}},"route_patterns":{}},"type":"route"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.route
            , testOne
                "ferry"
                "/routes/Boat-F1"
                """
                {"data":{"attributes":{"color":"008EAA","description":"Ferry","direction_destinations":["Hingham or Hull","Long Wharf"],"direction_names":["Outbound","Inbound"],"fare_class":"Ferry","long_name":"Hingham/Hull Ferry","short_name":"","sort_order":30002,"text_color":"FFFFFF","type":4},"id":"Boat-F1","links":{"self":"/routes/Boat-F1"},"relationships":{"line":{"data":null},"route_patterns":{}},"type":"route"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.route
            , testOne
                "with include"
                "/routes/116?include=line,route_patterns"
                """
                {"data":{"attributes":{"color":"FFC72C","description":"Key Bus","direction_destinations":["Wonderland","Maverick"],"direction_names":["Outbound","Inbound"],"fare_class":"Local Bus","long_name":"Wonderland - Maverick via Revere Street","short_name":"116","sort_order":51160,"text_color":"000000","type":3},"id":"116","links":{"self":"/routes/116"},"relationships":{"line":{"data":{"id":"line-114116117","type":"line"}},"route_patterns":{"data":[{"id":"116-4-0","type":"route_pattern"},{"id":"116-4-1","type":"route_pattern"},{"id":"116-9-0","type":"route_pattern"}]}},"type":"route"},"included":[{"attributes":{"direction_id":0,"name":"Wonderland Station via Revere Street","sort_order":51160000,"time_desc":null,"typicality":1},"id":"116-4-0","links":{"self":"/route-patterns/116-4-0"},"relationships":{"representative_trip":{"data":{"id":"40100493","type":"trip"}},"route":{"data":{"id":"116","type":"route"}}},"type":"route_pattern"},{"attributes":{"direction_id":1,"name":"Maverick via Revere","sort_order":51160100,"time_desc":null,"typicality":1},"id":"116-4-1","links":{"self":"/route-patterns/116-4-1"},"relationships":{"representative_trip":{"data":{"id":"40100744","type":"trip"}},"route":{"data":{"id":"116","type":"route"}}},"type":"route_pattern"},{"attributes":{"direction_id":0,"name":"Wonderland Station via Revere Street","sort_order":51160099,"time_desc":"Sunday early mornings only","typicality":3},"id":"116-9-0","links":{"self":"/route-patterns/116-9-0"},"relationships":{"representative_trip":{"data":{"id":"40080148","type":"trip"}},"route":{"data":{"id":"116","type":"route"}}},"type":"route_pattern"},{"attributes":{"color":"FFC72C","long_name":"Wonderland or Chelsea - Maverick","short_name":"114/116/117","sort_order":51140,"text_color":"000000"},"id":"line-114116117","links":{"self":"/lines/line-114116117"},"relationships":{"routes":{}},"type":"line"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.route
            , testMany
                "many with include"
                "/routes?filter[stop]=place-state"
                """
                {"data":[{"attributes":{"color":"ED8B00","description":"Rapid Transit","direction_destinations":["Forest Hills","Oak Grove"],"direction_names":["South","North"],"fare_class":"Rapid Transit","long_name":"Orange Line","short_name":"","sort_order":10020,"text_color":"FFFFFF","type":1},"id":"Orange","links":{"self":"/routes/Orange"},"relationships":{"line":{"data":{"id":"line-Orange","type":"line"}},"route_patterns":{}},"type":"route"},{"attributes":{"color":"003DA5","description":"Rapid Transit","direction_destinations":["Bowdoin","Wonderland"],"direction_names":["West","East"],"fare_class":"Rapid Transit","long_name":"Blue Line","short_name":"","sort_order":10040,"text_color":"FFFFFF","type":1},"id":"Blue","links":{"self":"/routes/Blue"},"relationships":{"line":{"data":{"id":"line-Blue","type":"line"}},"route_patterns":{}},"type":"route"},{"attributes":{"color":"FFC72C","description":"Commuter Bus","direction_destinations":["North Burlington","Downtown Boston"],"direction_names":["Outbound","Inbound"],"fare_class":"Outer Express","long_name":"North Burlington - Downtown Boston","short_name":"352","sort_order":53520,"text_color":"000000","type":3},"id":"352","links":{"self":"/routes/352"},"relationships":{"line":{"data":{"id":"line-352","type":"line"}},"route_patterns":{}},"type":"route"},{"attributes":{"color":"FFC72C","description":"Commuter Bus","direction_destinations":["Burlington","Downtown Boston"],"direction_names":["Outbound","Inbound"],"fare_class":"Outer Express","long_name":"Burlington - Downtown Boston","short_name":"354","sort_order":53540,"text_color":"000000","type":3},"id":"354","links":{"self":"/routes/354"},"relationships":{"line":{"data":{"id":"line-354","type":"line"}},"route_patterns":{}},"type":"route"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.route
            ]
        , describe "routePattern"
            [ testOne
                "one"
                "https://api-v3.mbta.com/route_patterns/Boat-F1-0-0"
                """
                {"data":{"attributes":{"direction_id":0,"name":"Long Wharf - Hingham via Logan Airport & Hull","sort_order":30002000,"time_desc":null,"typicality":1},"id":"Boat-F1-0-0","links":{"self":"/route_patterns/Boat-F1-0-0"},"relationships":{"representative_trip":{"data":{"id":"Boat-F1-1100-Long-FridaySummer","type":"trip"}},"route":{"data":{"id":"Boat-F1","type":"route"}}},"type":"route_pattern"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.routePattern

            {-
               disabled due to bug in api. https://app.asana.com/0/695227265423458/1121247532991446
               , testOne
                   "with includes"
                   "https://api-v3.mbta.com/route_patterns/Boat-F1-0-0?include=route,representative_trip"
                   """
                   {"data":{"attributes":{"direction_id":0,"name":"Long Wharf - Hingham via Logan Airport & Hull","sort_order":30002000,"time_desc":null,"typicality":1},"id":"Boat-F1-0-0","links":{"self":"/route-patterns/Boat-F1-0-0"},"relationships":{"representative_trip":{"data":[{"id":"Boat-F1-1100-Long-Weekday","type":"trip"}]},"route":{"data":{"id":"Boat-F1","type":"route"}}},"type":"route_pattern"},"included":[{"attributes":{"color":"008EAA","description":"Ferry","direction_destinations":["Hingham or Hull","Long Wharf"],"direction_names":["Outbound","Inbound"],"fare_class":"Ferry","long_name":"Hingham/Hull Ferry","short_name":"","sort_order":30002,"text_color":"FFFFFF","type":4},"id":"Boat-F1","links":{"self":"/routes/Boat-F1"},"relationships":{"line":{"data":null},"route_patterns":{}},"type":"route"},{"attributes":{"bikes_allowed":1,"block_id":"B-08","direction_id":0,"headsign":"Hingham via Logan Airport & Hull","name":"","wheelchair_accessible":1},"id":"Boat-F1-1100-Long-Weekday","links":{"self":"/trips/Boat-F1-1100-Long-Weekday"},"relationships":{"route":{"data":{"id":"Boat-F1","type":"route"}},"route_pattern":{"data":{"id":"Boat-F1-0-0","type":"route_pattern"}},"service":{"data":{"id":"Boat-F1-Weekday","type":"service"}},"shape":{"data":{"id":"b0006","type":"shape"}}},"type":"trip"}],"jsonapi":{"version":"1.0"}}
                   """
                   Mbta.Decode.routePattern
            -}
            , testMany
                "multiple"
                "https://api-v3.mbta.com/route_patterns?filter[route]=225&filter[direction_id]=1"
                """
                {"data":[{"attributes":{"direction_id":1,"name":"Quincy Center","sort_order":52250167,"time_desc":null,"typicality":2},"id":"225-1-1","links":{"self":"/route_patterns/225-1-1"},"relationships":{"representative_trip":{"data":{"id":"40759111","type":"trip"}},"route":{"data":{"id":"225","type":"route"}}},"type":"route_pattern"},{"attributes":{"direction_id":1,"name":"Quincy Center via Shaw Street","sort_order":52250176,"time_desc":null,"typicality":2},"id":"225-4-1","links":{"self":"/route_patterns/225-4-1"},"relationships":{"representative_trip":{"data":{"id":"40759136","type":"trip"}},"route":{"data":{"id":"225","type":"route"}}},"type":"route_pattern"},{"attributes":{"direction_id":1,"name":"Quincy Center","sort_order":52250181,"time_desc":null,"typicality":2},"id":"225-3-1","links":{"self":"/route_patterns/225-3-1"},"relationships":{"representative_trip":{"data":{"id":"40759206","type":"trip"}},"route":{"data":{"id":"225","type":"route"}}},"type":"route_pattern"},{"attributes":{"direction_id":1,"name":"Quincy Center via Quincy Avenue","sort_order":52250190,"time_desc":null,"typicality":3},"id":"225-_-1","links":{"self":"/route_patterns/225-_-1"},"relationships":{"representative_trip":{"data":{"id":"40759165","type":"trip"}},"route":{"data":{"id":"225","type":"route"}}},"type":"route_pattern"},{"attributes":{"direction_id":1,"name":"Quincy Center via Shaw Street","sort_order":52250190,"time_desc":null,"typicality":3},"id":"225-5-1","links":{"self":"/route_patterns/225-5-1"},"relationships":{"representative_trip":{"data":{"id":"40759113","type":"trip"}},"route":{"data":{"id":"225","type":"route"}}},"type":"route_pattern"},{"attributes":{"direction_id":1,"name":"Quincy Center via Shaw Street","sort_order":52250194,"time_desc":"Weekdays only","typicality":3},"id":"225-2-1","links":{"self":"/route_patterns/225-2-1"},"relationships":{"representative_trip":{"data":{"id":"40759130","type":"trip"}},"route":{"data":{"id":"225","type":"route"}}},"type":"route_pattern"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.routePattern
            ]
        , describe "lines"
            [ testOne
                "one"
                "https://api-v3.mbta.com/lines/line-SLWaterfront"
                """
                {"data":{"attributes":{"color":"7C878E","long_name":"Silver Line SL1/SL2/SL3","short_name":"","sort_order":10051,"text_color":"FFFFFF"},"id":"line-SLWaterfront","links":{"self":"/lines/line-SLWaterfront"},"relationships":{"routes":{}},"type":"line"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.line
            , testOne
                "with includes"
                "https://api-v3.mbta.com/lines/line-SLWaterfront?include=routes"
                """
                {"data":{"attributes":{"color":"7C878E","long_name":"Silver Line SL1/SL2/SL3","short_name":"","sort_order":10051,"text_color":"FFFFFF"},"id":"line-SLWaterfront","links":{"self":"/lines/line-SLWaterfront"},"relationships":{"routes":{"data":[{"id":"741","type":"route"},{"id":"742","type":"route"},{"id":"743","type":"route"},{"id":"746","type":"route"}]}},"type":"line"},"included":[{"attributes":{"color":"7C878E","description":"Key Bus","direction_destinations":["Logan Airport","South Station"],"direction_names":["Outbound","Inbound"],"fare_class":"Rapid Transit","long_name":"Logan Airport - South Station","short_name":"SL1","sort_order":10051,"text_color":"FFFFFF","type":3},"id":"741","links":{"self":"/routes/741"},"relationships":{"line":{"data":{"id":"line-SLWaterfront","type":"line"}},"route_patterns":{}},"type":"route"},{"attributes":{"color":"7C878E","description":"Key Bus","direction_destinations":["Design Center","South Station"],"direction_names":["Outbound","Inbound"],"fare_class":"Rapid Transit","long_name":"Design Center - South Station","short_name":"SL2","sort_order":10052,"text_color":"FFFFFF","type":3},"id":"742","links":{"self":"/routes/742"},"relationships":{"line":{"data":{"id":"line-SLWaterfront","type":"line"}},"route_patterns":{}},"type":"route"},{"attributes":{"color":"7C878E","description":"Key Bus","direction_destinations":["Chelsea","South Station"],"direction_names":["Outbound","Inbound"],"fare_class":"Rapid Transit","long_name":"Chelsea - South Station","short_name":"SL3","sort_order":10053,"text_color":"FFFFFF","type":3},"id":"743","links":{"self":"/routes/743"},"relationships":{"line":{"data":{"id":"line-SLWaterfront","type":"line"}},"route_patterns":{}},"type":"route"},{"attributes":{"color":"7C878E","description":"Key Bus","direction_destinations":["Silver Line Way","South Station"],"direction_names":["Outbound","Inbound"],"fare_class":"Rapid Transit","long_name":"Silver Line Way - South Station","short_name":"","sort_order":10057,"text_color":"FFFFFF","type":3},"id":"746","links":{"self":"/routes/746"},"relationships":{"line":{"data":{"id":"line-SLWaterfront","type":"line"}},"route_patterns":{}},"type":"route"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.line
            , testMany
                "multiple"
                "https://api-v3.mbta.com/lines?filter[id]=line-SLWaterfront,line-Green"
                """
                {"data":[{"attributes":{"color":"00843D","long_name":"Green Line","short_name":"","sort_order":10032,"text_color":"FFFFFF"},"id":"line-Green","links":{"self":"/lines/line-Green"},"relationships":{"routes":{}},"type":"line"},{"attributes":{"color":"7C878E","long_name":"Silver Line SL1/SL2/SL3","short_name":"","sort_order":10051,"text_color":"FFFFFF"},"id":"line-SLWaterfront","links":{"self":"/lines/line-SLWaterfront"},"relationships":{"routes":{}},"type":"line"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.line
            ]
        , describe "schedule"
            [ testMany
                "plain"
                "https://api-v3.mbta.com/schedules?filter[route]=743&filter[stop]=place-aport&filter[min_time]=24:00&filter[max_time]=24:20"
                """
                {"data":[{"attributes":{"arrival_time":"2019-08-05T00:13:00-04:00","departure_time":"2019-08-05T00:13:00-04:00","direction_id":0,"drop_off_type":0,"pickup_type":0,"stop_sequence":5,"timepoint":false},"id":"schedule-40640709-7096-5","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7096","type":"stop"}},"trip":{"data":{"id":"40640709","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":"2019-08-05T00:11:00-04:00","departure_time":"2019-08-05T00:11:00-04:00","direction_id":1,"drop_off_type":0,"pickup_type":0,"stop_sequence":5,"timepoint":false},"id":"schedule-40640805-7097-5","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7097","type":"stop"}},"trip":{"data":{"id":"40640805","type":"trip"}}},"type":"schedule"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.schedule
            , testMany
                "with includes"
                "https://api-v3.mbta.com/schedules?filter[route]=743&filter[stop]=place-aport&filter[min_time]=24:00&filter[max_time]=24:20?include=stop,trip,prediction,route"
                """
                {"data":[{"attributes":{"arrival_time":"2019-08-05T00:29:00-04:00","departure_time":"2019-08-05T00:29:00-04:00","direction_id":0,"drop_off_type":0,"pickup_type":0,"stop_sequence":5,"timepoint":false},"id":"schedule-40640684-7096-5","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7096","type":"stop"}},"trip":{"data":{"id":"40640684","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":"2019-08-05T00:13:00-04:00","departure_time":"2019-08-05T00:13:00-04:00","direction_id":0,"drop_off_type":0,"pickup_type":0,"stop_sequence":5,"timepoint":false},"id":"schedule-40640709-7096-5","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7096","type":"stop"}},"trip":{"data":{"id":"40640709","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":"2019-08-05T01:10:00-04:00","departure_time":"2019-08-05T01:10:00-04:00","direction_id":0,"drop_off_type":0,"pickup_type":0,"stop_sequence":5,"timepoint":false},"id":"schedule-40640744-7096-5","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7096","type":"stop"}},"trip":{"data":{"id":"40640744","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":"2019-08-05T00:44:00-04:00","departure_time":"2019-08-05T00:44:00-04:00","direction_id":0,"drop_off_type":0,"pickup_type":0,"stop_sequence":5,"timepoint":false},"id":"schedule-40640811-7096-5","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7096","type":"stop"}},"trip":{"data":{"id":"40640811","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":"2019-08-05T00:55:00-04:00","departure_time":"2019-08-05T00:55:00-04:00","direction_id":1,"drop_off_type":0,"pickup_type":0,"stop_sequence":5,"timepoint":false},"id":"schedule-40640675-7097-5","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7097","type":"stop"}},"trip":{"data":{"id":"40640675","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":"2019-08-05T00:41:00-04:00","departure_time":"2019-08-05T00:41:00-04:00","direction_id":1,"drop_off_type":0,"pickup_type":0,"stop_sequence":5,"timepoint":false},"id":"schedule-40640697-7097-5","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7097","type":"stop"}},"trip":{"data":{"id":"40640697","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":"2019-08-05T00:31:00-04:00","departure_time":"2019-08-05T00:31:00-04:00","direction_id":1,"drop_off_type":0,"pickup_type":0,"stop_sequence":5,"timepoint":false},"id":"schedule-40640726-7097-5","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7097","type":"stop"}},"trip":{"data":{"id":"40640726","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":"2019-08-05T01:35:00-04:00","departure_time":"2019-08-05T01:35:00-04:00","direction_id":1,"drop_off_type":0,"pickup_type":0,"stop_sequence":5,"timepoint":false},"id":"schedule-40640729-7097-5","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7097","type":"stop"}},"trip":{"data":{"id":"40640729","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":"2019-08-05T00:21:00-04:00","departure_time":"2019-08-05T00:21:00-04:00","direction_id":1,"drop_off_type":0,"pickup_type":0,"stop_sequence":5,"timepoint":false},"id":"schedule-40640769-7097-5","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7097","type":"stop"}},"trip":{"data":{"id":"40640769","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":"2019-08-05T01:10:00-04:00","departure_time":"2019-08-05T01:10:00-04:00","direction_id":1,"drop_off_type":0,"pickup_type":0,"stop_sequence":5,"timepoint":false},"id":"schedule-40640801-7097-5","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7097","type":"stop"}},"trip":{"data":{"id":"40640801","type":"trip"}}},"type":"schedule"},{"attributes":{"arrival_time":"2019-08-05T00:11:00-04:00","departure_time":"2019-08-05T00:11:00-04:00","direction_id":1,"drop_off_type":0,"pickup_type":0,"stop_sequence":5,"timepoint":false},"id":"schedule-40640805-7097-5","relationships":{"prediction":{},"route":{"data":{"id":"743","type":"route"}},"stop":{"data":{"id":"7097","type":"stop"}},"trip":{"data":{"id":"40640805","type":"trip"}}},"type":"schedule"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.schedule
            ]
        , describe "trip"
            [ testOne
                "one trip"
                "https://api-v3.mbta.com/trips/CR-Saturday-Spring-19-1515"
                """
                {"data":{"attributes":{"bikes_allowed":1,"block_id":"","direction_id":0,"headsign":"Worcester","name":"1515","wheelchair_accessible":1},"id":"CR-Saturday-Spring-19-1515","links":{"self":"/trips/CR-Saturday-Spring-19-1515"},"relationships":{"route":{"data":{"id":"CR-Worcester","type":"route"}},"route_pattern":{"data":{"id":"CR-Worcester-0-0","type":"route_pattern"}},"service":{"data":{"id":"CR-Sa-Worcester-Spr-19","type":"service"}},"shape":{"data":{"id":"9850002","type":"shape"}}},"type":"trip"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.trip
            , testOne
                "with includes"
                "https://api-v3.mbta.com/trips/CR-Saturday-Spring-19-1515?include=route,vehicle,service,shape,predictions,route_pattern"
                """
                {"data":{"attributes":{"bikes_allowed":1,"block_id":"","direction_id":0,"headsign":"Worcester","name":"1515","wheelchair_accessible":1},"id":"CR-Saturday-Spring-19-1515","links":{"self":"/trips/CR-Saturday-Spring-19-1515"},"relationships":{"predictions":{"data":[]},"route":{"data":{"id":"CR-Worcester","type":"route"}},"route_pattern":{"data":{"id":"CR-Worcester-0-0","type":"route_pattern"}},"service":{"data":{"id":"CR-Sa-Worcester-Spr-19","type":"service"}},"shape":{"data":{"id":"9850002","type":"shape"}},"vehicle":{"data":null}},"type":"trip"},"included":[{"attributes":{"direction_id":0,"name":"Worcester","polyline":"{wnaGh}tpLzPdHbA`@`Bp@PFn@Z^Nh@Xd@Xb@ZPN\\\\h@d@z@d@`ARj@Jn@Hf@@h@@p@Ab@Cd@O|ACHEZG^EXEXCLCLIl@c@dD]nBKp@CVu@|EEVERa@hCMbAG`@CRK~@e@fGSnCEd@E|A?ZAh@AtA@dCAbD@\\\\?`@@zFAj@?n@?rA?R???jA?ZDlC@XD~ABbA@f@@tI@lDFhBBzCHz`@@V?jEBbC@fA?p@Ch@GlAMzBMtAChA?fF@zAAnC?V@V?V?pF@zF?rQ@T?t@BrA?fCAnBCtACf@???JGj@Gp@Er@C\\\\{A~N}A`OANAJ[zB]jBWnA[jAY~@GTELGNmCrGQ\\\\EFWl@Sf@ELUn@g@hAm@rAi@xAqBtFADg@fA{AtDcCzFg@dAc@x@q@vBS|@u@jD[jBSfBa@vF_@pEQfCqCf_@QhCc@|F[bDKl@Cl@IrAALU`D}@pLWjDc@hGSpDANCRQ`Dg@rGKdBa@hDKrAGhAQxB]xEUvCGdAGdACdAC~A?tBDjB@X@L?HF~AFbAZdEJ|AHnAFvBFtCF|E@pC?FLlGBzBDrF@rBB|CFdHLdI@~AFfFFdEJ`KBjDNtM?zAAvBEdACfAIxAGdAK|@KdAQpAKn@QfASrASxA]hDQtCGfBAlB?zA@nAFzBFrAHlAPbBd@pDBV@Pl@vEb@lDHd@DZNpAFVBPBRp@pFBPlBxND^D\\\\@DDZjAnJDZFZ\\\\rChBfNh@vD^xB^nBj@bDLp@BLDPf@fCNn@RhAjBrJ\\\\`B`AdFP|@BPBJ~@rE`@zBX~Ar@`FZfCPxAFv@??BTBd@F`@NjBr@lJR~CBVBXFfAd@xG|@rMNnBV`C`@bDnBlNThBrApJRbBf@lFJ~ALrBHlB?VBPZpIBP?N\\\\lI@X@VDj@ZfHD|@??Bn@FhB@Z@L?LBXH~ALzCR~EH~A@R@TV`GRfFVrFr@lQ@L?H@N@P@P@\\\\FdAVlGRzD\\\\|H@RBZJ~C@D??LdDHdAFz@NlAN`ALx@Jj@VhA\\\\rAV~@Xv@Xr@DJFP\\\\v@h@fA`BhCfAnAf@d@h@f@ZZ\\\\XVTTRjA~@rCbC`@\\\\xArAdAdAhAnApA|AdAvAtAvBr@pAJRDHZr@fAjCDNL\\\\X~@v@zChAfFbA~EtAfGp@~Cp@zCd@rBh@fB^hAXt@\\\\x@r@rAp@jAt@fAf@r@~@bAh@f@p@p@j@d@dAt@r@`@n@\\\\x@^RFh@RlA\\\\tATVD`ALdAFtA@hAC~COfGc@vCUrEYzAEtA?nBHfAJd@BH?J@fARhAVvDbAJD??jGfBnBj@vBj@vCz@PFLDbFxAxA^bElAnBj@lA^jD`AtI~BPDRDRFt@T~@XVFRFv@Tx@X??LDrAn@r@b@dAr@bAx@dB~Ad@p@FHFLt@hAnCdEzFxIfAdBtDtFfAbBhAhBxEdHvAvBj@z@DFFJ~CxE|@tAlBrC|EnHbBdClBtCv@nAhAtBv@|AXp@f@bB??ZfADRBHf@pBTfA`@fCVtBV`DLpBBxB@L?R@tDQtOAbEGtBIvFIfI?hEFxFZzKL~BRzCXjD^rDp@xEr@~Dp@|CVlAVlAh@~BVvA`CjLb@bBpA~DnCpHbCxGjBxE~BvG`BjF~DlNfB`GbCpInA|Et@fDb@tB@JBPn@`Ef@pDb@bEVdDPfC^nFZ|Dz@hK@PB`@??VhD@HF|@@TBb@LrC`@vFf@rGPpCLbB`@nGZxCVlBp@dE~A`Lh@fEPhCF~AFbD@`CCnBI|AIdA[dFOnBMrBUrCUfG?pBAzB@fCDxCFnCLnGLjJBlDDnEHxDF~ELdHHtEBpEJvFV~SJ`GHfGFjDDrC@r@@d@?J@H@j@BhA@L??PjCP~BR|AdA~Fx@fEj@~BVlAvD`Rx@rDj@vCzAdHVfB~@nE^vB^rCRtAx@hG|@fHn@dE^fDpA~JnArI`@xDZnDVnBRnA`@xBjAhG??ZdB~@fFn@bDX|ARnALlAJpBJ~BFlBHdEBjBAN@PFjD@`BFtDF`EJ`GBbCHlEHbGPxIBpA@N@NLxBRlBTpBXhBTnA`@bB`@tAb@xAh@xAt@hBv@`Br@lAd@r@r@`Al@p@v@r@xBtBpApAnB`BfAbA^Xt@b@|@l@rA|@xBlAd@Td@VrBz@xAp@|B~@nBx@rCvAz@f@ZR^Zv@j@fC`Cr@t@`@h@|@jAj@z@^r@p@nAbBxD^dADFBFFV^lAj@|BRj@d@`C^pCXnCRtBH`BD`BBjA@bA?fCCpBCfAYpIg@vMs@`S?FSpFK~CIzAOzDY~GYzH_@|Ju@fS[nI[`I??ANInCAHALi@tNY`IAd@Ab@InBQdCIz@K~@QhAWrAi@`CyA`GgC~J{BpIaB|GUbAOn@_@tBIh@c@xDGv@QdEArACrA@dBLjK@~BAzBCbBEbAQ`CKjAUhBSrAIf@Mt@Qr@q@nC}BxIy@bDs@fDSbAQlA[vCOdBG|@Ez@ErBAnA?xBBzAHnBH|AT~BP~ApAfLb@xD??P~AZxCN|ADj@Dt@Bf@P|FV|HLpEpArc@?D@PBfA@`A|Atg@FnD@~CCnAExAGhAShCIv@g@pDS`AmAhFi@|ByBbJ}@hECLCJGXUvAm@jEQpAc@vEQpBKdBSnEIlDClCAj@?\\\\?RAb@Af@ErDSfRAT?RAbA?P?TmAxhASrSEtCG~KAtJMp`AGh\\\\?tHAtBE~AE|AOnBSxBS~AYdB[dBc@dBc@~Ag@|AaAbCiEjKoAvDa@nAQp@_AdD}@`EQ|@CL_@nBs@hEGl@YzBWbCQxBYdEI`BGhBErBGzD?rD@rAHlEFbBV|EBT??@TBd@JvAd@fF`@nDXrBrB~OdBrMJv@DVdA`IdAlItBnOnA|JBL?DBNFf@Jl@nAjJjBxN??XvBh@jD\\\\vB`@rBXlADP^zAb@bB\\\\lA`@nAd@rAx@vBn@zAj@jAvAnCXh@V^`AvAh@r@z@hAlBzBvA|AxFpGzA`BpC`DXX\\\\^fDxDlBzBfAlAbEdExFxGnEnFp@hArDtIpFbLtJzOrBpCtBjDvBnDrBxEp@tAf@zBv@hEr@jE\\\\zDX`EVlAv@xDZfAf@nA`@z@x@|Ad@x@tAzB@@T\\\\FJXd@d@x@??~BzDtBlDt@|AZx@Tl@^dAPt@VjARbARtANdB`ApQp@rM\\\\rHf@fJb@rH^pHp@dKLhAJrAFp@Lz@XbCRnARlAx@bE\\\\bBz@pDdAzDp@nBl@dB~A|DxBvFBHJTfErKhB|Et@vBz@nCb@nAt@rCf@lBTdAn@~Ct@`E^~Bh@pDTfBLjAt@nI`@nGz@vNPvChAtQLbCRpDL~BP`CP`DVbFH`AJrBDr@Dx@FfBB~@BnB?nAA`AKzBEh@MnAOhAQ`AIb@c@hBQl@M^e@lAO\\\\]r@aAbB]j@a@h@_AlAe@f@g@f@aA|@o@f@{@l@wAz@yAx@kAl@_A`@yAj@OF_Bf@cAXa@H}@NaBPmBN}@F}F\\\\cYdBiALoARg@J{@Ry@V{@Xq@VeBt@u@\\\\iB`A}Ax@m@`@o@`@}AlA{@r@sBhBeE`E_FxEq@r@w@~@[`@Yb@s@hAs@pA]p@gBrDkA|Bu@nAiAfBo@z@o@z@o@t@SV}@`Ai@f@uAhAa@Zi@`@g@Zo@^cB|@yAp@m@Vk@Pk@PuA^i@Ji@Hs@Hu@Fs@Bq@@q@@q@?sBGoHe@uAEWAs@EY@_@DYDc@Fc@JcAXa@L_@P{@b@]R_@VYTa@^YZ[Zo@z@m@|@U`@Sb@Ud@Qb@_@hA]hAKf@WnASjAMhAMrAGpAGjA?RARApAApA@f@@l@HxAJlAFf@Hf@TlAVhARr@`@jAXr@^t@PZbAzAz@hAb@l@lF|GpDlEx@fAjA`B@?bBhCzDxHr@tAdFhJj@bA~@bBj@dA^x@d@hA\\\\bA`@zATjAP|@RvAXbCfBdPh@`EJf@zAbIXrAR`ABNb@jBNj@DN","priority":2},"id":"9850002","links":{"self":"/shapes/9850002"},"relationships":{"route":{"data":{"id":"CR-Worcester","type":"route"}},"stops":{"data":[{"id":"place-sstat","type":"stop"},{"id":"place-bbsta","type":"stop"},{"id":"place-WML-0025","type":"stop"},{"id":"place-WML-0035","type":"stop"},{"id":"place-WML-0081","type":"stop"},{"id":"place-WML-0091","type":"stop"},{"id":"place-WML-0102","type":"stop"},{"id":"place-WML-0125","type":"stop"},{"id":"place-WML-0135","type":"stop"},{"id":"place-WML-0147","type":"stop"},{"id":"place-WML-0177","type":"stop"},{"id":"place-WML-0199","type":"stop"},{"id":"place-WML-0214","type":"stop"},{"id":"place-WML-0252","type":"stop"},{"id":"place-WML-0274","type":"stop"},{"id":"place-WML-0340","type":"stop"},{"id":"place-WML-0364","type":"stop"},{"id":"place-WML-0442","type":"stop"}]}},"type":"shape"},{"attributes":{"added_dates":[],"added_dates_notes":[],"description":"Saturday schedule","end_date":"2019-08-31","removed_dates":[],"removed_dates_notes":[],"schedule_name":"Saturday","schedule_type":"Saturday","schedule_typicality":1,"start_date":"2019-07-27","valid_days":[6]},"id":"CR-Sa-Worcester-Spr-19","links":{"self":"/services/CR-Sa-Worcester-Spr-19"},"type":"service"},{"attributes":{"color":"80276C","description":"Commuter Rail","direction_destinations":["Worcester","South Station"],"direction_names":["Outbound","Inbound"],"fare_class":"Commuter Rail","long_name":"Framingham/Worcester Line","short_name":"","sort_order":20003,"text_color":"FFFFFF","type":2},"id":"CR-Worcester","links":{"self":"/routes/CR-Worcester"},"relationships":{"line":{"data":{"id":"line-Worcester","type":"line"}},"route_patterns":{}},"type":"route"},{"attributes":{"direction_id":0,"name":"South Station - Worcester","sort_order":20003000,"time_desc":null,"typicality":1},"id":"CR-Worcester-0-0","links":{"self":"/route_patterns/CR-Worcester-0-0"},"relationships":{"representative_trip":{"data":{"id":"CR-Weekday-Spring-19-501","type":"trip"}},"route":{"data":{"id":"CR-Worcester","type":"route"}}},"type":"route_pattern"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.trip
            , testMany
                "multiple"
                "https://api-v3.mbta.com/trips?filter[route]=170&filter[date]=2019-08-05"
                """
                {"data":[{"attributes":{"bikes_allowed":1,"block_id":"A504-97","direction_id":0,"headsign":"Waltham Central Square (Express)","name":"","wheelchair_accessible":1},"id":"40641370","links":{"self":"/trips/40641370"},"relationships":{"route":{"data":{"id":"170","type":"route"}},"route_pattern":{"data":{"id":"170-_-0","type":"route_pattern"}},"service":{"data":{"id":"BUS319-1-Wdy-02","type":"service"}},"shape":{"data":{"id":"1700028","type":"shape"}}},"type":"trip"},{"attributes":{"bikes_allowed":1,"block_id":"A170-57","direction_id":0,"headsign":"Waltham Central Square (Express)","name":"","wheelchair_accessible":1},"id":"40641403","links":{"self":"/trips/40641403"},"relationships":{"route":{"data":{"id":"170","type":"route"}},"route_pattern":{"data":{"id":"170-_-0","type":"route_pattern"}},"service":{"data":{"id":"BUS319-1-Wdy-02","type":"service"}},"shape":{"data":{"id":"1700028","type":"shape"}}},"type":"trip"},{"attributes":{"bikes_allowed":1,"block_id":"A170-58","direction_id":1,"headsign":"Dudley (Express)","name":"","wheelchair_accessible":1},"id":"40641695","links":{"self":"/trips/40641695"},"relationships":{"route":{"data":{"id":"170","type":"route"}},"route_pattern":{"data":{"id":"170-3-1","type":"route_pattern"}},"service":{"data":{"id":"BUS319-1-Wdy-02","type":"service"}},"shape":{"data":{"id":"1700034","type":"shape"}}},"type":"trip"},{"attributes":{"bikes_allowed":1,"block_id":"A170-59","direction_id":1,"headsign":"Dudley (Express)","name":"","wheelchair_accessible":1},"id":"40641696","links":{"self":"/trips/40641696"},"relationships":{"route":{"data":{"id":"170","type":"route"}},"route_pattern":{"data":{"id":"170-3-1","type":"route_pattern"}},"service":{"data":{"id":"BUS319-1-Wdy-02","type":"service"}},"shape":{"data":{"id":"1700034","type":"shape"}}},"type":"trip"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.trip
            ]
        , describe "service"
            [ testOne
                "one"
                "https://api-v3.mbta.com/services/CR-Sa-Greenbush-Spr-19"
                """
                {"data":{"attributes":{"added_dates":[],"added_dates_notes":[],"description":"Saturday schedule","end_date":"2019-08-31","removed_dates":[],"removed_dates_notes":[],"schedule_name":"Saturday","schedule_type":"Saturday","schedule_typicality":1,"start_date":"2019-07-27","valid_days":[6]},"id":"CR-Sa-Greenbush-Spr-19","links":{"self":"/services/CR-Sa-Greenbush-Spr-19"},"type":"service"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.service
            , testMany
                "many"
                "https://api-v3.mbta.com/services?filter[id]=CR-Sa-Greenbush-Spr-19"
                """
                {"data":[{"attributes":{"added_dates":[],"added_dates_notes":[],"description":"Saturday schedule","end_date":"2019-08-31","removed_dates":[],"removed_dates_notes":[],"schedule_name":"Saturday","schedule_type":"Saturday","schedule_typicality":1,"start_date":"2019-07-27","valid_days":[6]},"id":"CR-Sa-Greenbush-Spr-19","links":{"self":"/services/CR-Sa-Greenbush-Spr-19"},"type":"service"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.service
            ]
        , describe "shape"
            [ testOne
                "one"
                "https://api-v3.mbta.com/shapes/931_0009"
                """
                {"data":{"attributes":{"direction_id":0,"name":"Ashmont","polyline":"}nwaG~|eqLGyNIqAAc@S_CAEWu@g@}@u@k@u@Wu@OMGIMISQkAOcAGw@SoDFkCf@sUXcJJuERwHPkENqCJmB^mDn@}D??D[TeANy@\\\\iAt@qB`AwBl@cAl@m@b@Yn@QrBEtCKxQ_ApMT??R?`m@hD`Np@jAF|@C`B_@hBi@n@s@d@gA`@}@Z_@RMZIl@@fBFlB\\\\tAP??~@L^?HCLKJWJ_@vC{NDGLQvG}HdCiD`@e@Xc@b@oAjEcPrBeGfAsCvMqVl@sA??jByD`DoGd@cAj@cBJkAHqBNiGXeHVmJr@kR~@q^HsB@U??NgDr@gJTcH`@aMFyCF}AL}DN}GL}CXkILaD@QFmA@[??DaAFiBDu@BkA@UB]Fc@Jo@BGJ_@Lc@\\\\}@vJ_OrCyDj@iAb@_AvBuF`@gA`@aAv@qBVo@Xu@??bDgI??Tm@~IsQj@cAr@wBp@kBj@kB??HWtDcN`@g@POl@UhASh@Eb@?t@FXHl@Px@b@he@h[pCC??bnAm@h@T??xF|BpBp@^PLBXAz@Yl@]l@e@|B}CT[p@iA|A}BZi@zDuF\\\\c@n@s@VObAw@^Sl@Yj@U\\\\O|@WdAUxAQRCt@E??xAGrBQZAhAGlAEv@Et@E~@AdAAbCGpCA|BEjCMr@?nBDvANlARdBb@nDbA~@XnBp@\\\\JRH??|Al@`AZbA^jA^lA\\\\h@P|@TxAZ|@J~@LN?fBXxHhApDt@b@JXFtAVhALx@FbADtAC`B?z@BHBH@|@f@RN^^T\\\\h@hANb@HZH`@H^LpADlA@dD@jD@x@@b@Bp@HdAFd@Ll@F^??n@rDBRl@vD^pATp@Rb@b@z@\\\\l@`@j@p@t@j@h@n@h@n@`@hAh@n@\\\\t@PzANpAApBGtE}@xBa@??xB_@nOmB`OgBb@IrC[p@MbEmARCV@d@LH?tDyAXM","priority":2},"id":"931_0009","links":{"self":"/shapes/931_0009"},"relationships":{"route":{"data":{"id":"Red","type":"route"}},"stops":{"data":[{"id":"place-alfcl","type":"stop"},{"id":"place-davis","type":"stop"},{"id":"place-portr","type":"stop"},{"id":"place-harsq","type":"stop"},{"id":"place-cntsq","type":"stop"},{"id":"place-knncl","type":"stop"},{"id":"place-chmnl","type":"stop"},{"id":"place-pktrm","type":"stop"},{"id":"place-dwnxg","type":"stop"},{"id":"place-sstat","type":"stop"},{"id":"place-brdwy","type":"stop"},{"id":"place-andrw","type":"stop"},{"id":"place-jfk","type":"stop"},{"id":"place-shmnl","type":"stop"},{"id":"place-fldcr","type":"stop"},{"id":"place-smmnl","type":"stop"},{"id":"place-asmnl","type":"stop"}]}},"type":"shape"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.shape
            , testOne
                "with includes"
                "https://api-v3.mbta.com/shapes/7460007?include=route,stops"
                """
                {"data":{"attributes":{"direction_id":0,"name":"Silver Line Way","polyline":"y~naGj~tpLYo@Wu@Us@a@kAWiAMq@KqAEaB?uCPeBjAoOT_Cn@_C@E??j@aBpD_K`@u@RY\\\\[pAaAHCbGc@r@]h@o@d@e@b@m@`@eAFS??tC_Kt@yBNm@Fq@Au@?o@?}@","priority":3},"id":"7460007","links":{"self":"/shapes/7460007"},"relationships":{"route":{"data":{"id":"746","type":"route"}},"stops":{"data":[{"id":"place-sstat","type":"stop"},{"id":"place-crtst","type":"stop"},{"id":"place-wtcst","type":"stop"},{"id":"74624","type":"stop"}]}},"type":"shape"},"included":[{"attributes":{"color":"7C878E","description":"Key Bus","direction_destinations":["Silver Line Way","South Station"],"direction_names":["Outbound","Inbound"],"fare_class":"Rapid Transit","long_name":"Silver Line Way - South Station","short_name":"","sort_order":10057,"text_color":"FFFFFF","type":3},"id":"746","links":{"self":"/routes/746"},"relationships":{"line":{"data":{"id":"line-SLWaterfront","type":"line"}},"route_patterns":{}},"type":"route"},{"attributes":{"address":"Silver Line Way and Starboard Way, Boston, MA 02210","at_street":null,"description":"Silver Line Way after Manulife Building - Silver Line - Airport/Design Center/Chelsea","latitude":42.347056,"location_type":0,"longitude":-71.038814,"municipality":"Boston","name":"Silver Line Way after Manulife Building","on_street":"Silver Line Way","platform_code":null,"platform_name":"Airport/Design Center/Chelsea","vehicle_type":3,"wheelchair_boarding":1},"id":"74624","links":{"self":"/stops/74624"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=74624"}},"parent_station":{"data":null},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"address":"Seaport Blvd and Pittsburg St, Boston, MA","at_street":null,"description":null,"latitude":42.35245,"location_type":1,"longitude":-71.04685,"municipality":"Boston","name":"Courthouse","on_street":null,"platform_code":null,"platform_name":null,"vehicle_type":null,"wheelchair_boarding":1},"id":"place-crtst","links":{"self":"/stops/place-crtst"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=place-crtst"}},"parent_station":{"data":null},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"address":"700 Atlantic Ave, Boston, MA 02110","at_street":null,"description":null,"latitude":42.352271,"location_type":1,"longitude":-71.055242,"municipality":"Boston","name":"South Station","on_street":null,"platform_code":null,"platform_name":null,"vehicle_type":null,"wheelchair_boarding":1},"id":"place-sstat","links":{"self":"/stops/place-sstat"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=place-sstat"}},"parent_station":{"data":null},"recommended_transfers":{},"zone":{"data":{"id":"CR-zone-1A","type":"zone"}}},"type":"stop"},{"attributes":{"address":"Congress St and World Trade Center Ave, Boston, MA","at_street":null,"description":null,"latitude":42.34863,"location_type":1,"longitude":-71.04246,"municipality":"Boston","name":"World Trade Center","on_street":null,"platform_code":null,"platform_name":null,"vehicle_type":null,"wheelchair_boarding":1},"id":"place-wtcst","links":{"self":"/stops/place-wtcst"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=place-wtcst"}},"parent_station":{"data":null},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.shape
            , testMany
                "multiple"
                "https://api-v3.mbta.com/shapes?filter[route]=Red,filter[direction_id]=0"
                """
                {"data":[{"attributes":{"direction_id":0,"name":"Ashmont","polyline":"}nwaG~|eqLGyNIqAAc@S_CAEWu@g@}@u@k@u@Wu@OMGIMISQkAOcAGw@SoDFkCf@sUXcJJuERwHPkENqCJmB^mDn@}D??D[TeANy@\\\\iAt@qB`AwBl@cAl@m@b@Yn@QrBEtCKxQ_ApMT??R?`m@hD`Np@jAF|@C`B_@hBi@n@s@d@gA`@}@Z_@RMZIl@@fBFlB\\\\tAP??~@L^?HCLKJWJ_@vC{NDGLQvG}HdCiD`@e@Xc@b@oAjEcPrBeGfAsCvMqVl@sA??jByD`DoGd@cAj@cBJkAHqBNiGXeHVmJr@kR~@q^HsB@U??NgDr@gJTcH`@aMFyCF}AL}DN}GL}CXkILaD@QFmA@[??DaAFiBDu@BkA@UB]Fc@Jo@BGJ_@Lc@\\\\}@vJ_OrCyDj@iAb@_AvBuF`@gA`@aAv@qBVo@Xu@??bDgI??Tm@~IsQj@cAr@wBp@kBj@kB??HWtDcN`@g@POl@UhASh@Eb@?t@FXHl@Px@b@he@h[pCC??bnAm@h@T??xF|BpBp@^PLBXAz@Yl@]l@e@|B}CT[p@iA|A}BZi@zDuF\\\\c@n@s@VObAw@^Sl@Yj@U\\\\O|@WdAUxAQRCt@E??xAGrBQZAhAGlAEv@Et@E~@AdAAbCGpCA|BEjCMr@?nBDvANlARdBb@nDbA~@XnBp@\\\\JRH??|Al@`AZbA^jA^lA\\\\h@P|@TxAZ|@J~@LN?fBXxHhApDt@b@JXFtAVhALx@FbADtAC`B?z@BHBH@|@f@RN^^T\\\\h@hANb@HZH`@H^LpADlA@dD@jD@x@@b@Bp@HdAFd@Ll@F^??n@rDBRl@vD^pATp@Rb@b@z@\\\\l@`@j@p@t@j@h@n@h@n@`@hAh@n@\\\\t@PzANpAApBGtE}@xBa@??xB_@nOmB`OgBb@IrC[p@MbEmARCV@d@LH?tDyAXM","priority":2},"id":"931_0009","links":{"self":"/shapes/931_0009"},"relationships":{"route":{"data":{"id":"Red","type":"route"}},"stops":{"data":[{"id":"place-alfcl","type":"stop"},{"id":"place-davis","type":"stop"},{"id":"place-portr","type":"stop"},{"id":"place-harsq","type":"stop"},{"id":"place-cntsq","type":"stop"},{"id":"place-knncl","type":"stop"},{"id":"place-chmnl","type":"stop"},{"id":"place-pktrm","type":"stop"},{"id":"place-dwnxg","type":"stop"},{"id":"place-sstat","type":"stop"},{"id":"place-brdwy","type":"stop"},{"id":"place-andrw","type":"stop"},{"id":"place-jfk","type":"stop"},{"id":"place-shmnl","type":"stop"},{"id":"place-fldcr","type":"stop"},{"id":"place-smmnl","type":"stop"},{"id":"place-asmnl","type":"stop"}]}},"type":"shape"},{"attributes":{"direction_id":1,"name":"Ashmont","polyline":"qsaaGfrvpLYLuDxAI?e@MWASBcElAq@LsCZc@HaOfBoOlByB^??yB`@uE|@qBFqA@{AOu@Qo@]iAi@o@a@o@i@k@i@q@u@a@k@]m@c@{@Sc@Uq@_@qAm@wDCSo@sD??G_@Mm@Ge@IeACq@Ac@Ay@AkDAeDEmAMqAI_@Ia@I[Oc@i@iAU]_@_@SO}@g@IAIC{@CaB?uABcAEy@GiAMuAWYGc@KqDu@yHiAgBYO?_AM}@KyA[}@Ui@QmA]kA_@cA_@aA[}Am@??SI]KoBq@_AYoDcAeBc@mASwAOoBEs@?kCL}BDqC@cCFeA@_A@u@Dw@DmADiAF[@sBPyAF??u@DSByAPeAT}@V]Nk@Tm@X_@RcAv@WNo@r@]b@{DtF[h@}A|Bq@hAUZ}B|Cm@d@m@\\\\{@XY@MC_@QqBq@{F_C??g@ScnAl@??qCBie@i[y@c@m@QYIu@Gc@?i@DiARm@TQNa@f@uDbNIX??k@hBq@jBs@vBk@bA_JrQUj@??aDfI??[v@Wn@w@pBa@`Aa@fAwBtFc@~@k@hAsCxDwJ~N]|@Mb@K^CFKn@Gb@C\\\\ATCjAEt@GhBEbA??AXGlAAPM`DYjIM|CO|GM|DG|AGxCa@`MUbHs@fJOfD??ATIrB_Ap^s@jRWlJYdHOhGIpBKjAk@bBe@bAaDnGkBzD??m@pAwMpVgArCsBdGkEbPc@nAYb@a@d@eChDwG|HMPEFwCzNK^KVMJIB_@?iAO??kAOmB]gBGm@A[HSL[^a@|@e@fAo@r@iBh@aB^}@BkAGaNq@am@iDQ???sMUyQ~@uCJsBDo@Pc@Xm@l@m@bAaAvBu@pB]hAOx@UdAKr@??i@dD_@lDKlBOpCQjESvHKtEYbJg@rUGjCRnDFv@NbAPjAHRHLLFt@Nt@Vt@j@f@|@Vt@@DR~B@b@HpAFxN","priority":2},"id":"931_0010","links":{"self":"/shapes/931_0010"},"relationships":{"route":{"data":{"id":"Red","type":"route"}},"stops":{"data":[{"id":"place-asmnl","type":"stop"},{"id":"place-smmnl","type":"stop"},{"id":"place-fldcr","type":"stop"},{"id":"place-shmnl","type":"stop"},{"id":"place-jfk","type":"stop"},{"id":"place-andrw","type":"stop"},{"id":"place-brdwy","type":"stop"},{"id":"place-sstat","type":"stop"},{"id":"place-dwnxg","type":"stop"},{"id":"place-pktrm","type":"stop"},{"id":"place-chmnl","type":"stop"},{"id":"place-knncl","type":"stop"},{"id":"place-cntsq","type":"stop"},{"id":"place-harsq","type":"stop"},{"id":"place-portr","type":"stop"},{"id":"place-davis","type":"stop"},{"id":"place-alfcl","type":"stop"}]}},"type":"shape"},{"attributes":{"direction_id":0,"name":"Braintree","polyline":"}nwaG~|eqLGyNIqAAc@S_CAEWu@g@}@u@k@u@Wu@OMGIMISQkAOcAGw@SoDFkCf@sUXcJJuERwHPkENqCJmB^mDn@}D??D[TeANy@\\\\iAt@qB`AwBl@cAl@m@b@Yn@QrBEtCKxQ_ApMT??R?`m@hD`Np@jAF|@C`B_@hBi@n@s@d@gA`@}@Z_@RMZIl@@fBFlB\\\\tAP??~@L^?HCLKJWJ_@vC{NDGLQvG}HdCiD`@e@Xc@b@oAjEcPrBeGfAsCvMqVl@sA??jByD`DoGd@cAj@cBJkAHqBNiGXeHVmJr@kR~@q^HsB@U??NgDr@gJTcH`@aMFyCF}AL}DN}GL}CXkILaD@QFmA@[??DaAFiBDu@BkA@UB]Fc@Jo@BGJ_@Lc@\\\\}@vJ_OrCyDj@iAb@_AvBuF`@gA`@aAv@qBVo@Xu@??bDgI??Tm@~IsQj@cAr@wBp@kBj@kB??HWtDcN`@g@POl@UhASh@Eb@?t@FXHl@Px@b@he@h[pCC??bnAm@h@T??xF|BpBp@^PLBXAz@Yl@]l@e@|B}CT[p@iA|A}BZi@jBeDnAiBz@iAf@k@l@g@dAs@fAe@|@WpCe@l@GTCRE\\\\G??~@O`@ELA|AGf@A\\\\CjCGrEKz@AdEAxHY|BD~@JjB^fF~AdDbA|InCxCv@zD|@rWfEXDpB`@tANvAHx@AjBIx@M~@S~@a@fAi@HEnA{@fA{@|HuI|DwEbDqDpLkNhCyClEiFhLaN`@c@f@o@RURUbDsDbAiA`AgAv@_AHKHI~E}FdBoBfAgAfD{DxDoE~DcF|BkClAwALODEJOJK|@gATWvAoA`Au@fAs@hAk@n@QpAa@vDeAhA[x@Yh@Wv@a@b@YfAaAjCgCz@aAtByBz@{@??|FaGtCaDbL{LhI{IzHgJdAuAjC{CVYvAwA??JIl@a@NMNM\\\\[|AuArF_GlPyQrD_ErAwAd@e@nE{ErDuD\\\\a@nE_FZYPSRUvL{Mv@}@Z[JILKv@m@z@i@fCkAlBmAl@[t@[??h@WxBeAp@]dAi@p@YXIPEXKDALENEbAQl@Gz@ChADtAL~ARnCZbGx@xB`@TDL@PBzAVjIvA^FVDVB|@NjHlAlPnCnCd@vBXhBNv@JtAPL@|BXrAN??`@FRBj@Bp@FbADz@?dAIp@I|@Mx@Q`AWhAYlBs@pDaBzAs@nBgAZQJGJGhAs@RKVMNKTMf@YdHcEzBmApAw@`GmDLI@AHGlEwClAi@hA_@v@Up@ObB]z@Kr@Ir@EZCpA?dCRf@DpAHvANrE`@bDTr@DfMdA`CJvBRn@DnCLnBPfAFV@","priority":1},"id":"933_0009","links":{"self":"/shapes/933_0009"},"relationships":{"route":{"data":{"id":"Red","type":"route"}},"stops":{"data":[{"id":"place-alfcl","type":"stop"},{"id":"place-davis","type":"stop"},{"id":"place-portr","type":"stop"},{"id":"place-harsq","type":"stop"},{"id":"place-cntsq","type":"stop"},{"id":"place-knncl","type":"stop"},{"id":"place-chmnl","type":"stop"},{"id":"place-pktrm","type":"stop"},{"id":"place-dwnxg","type":"stop"},{"id":"place-sstat","type":"stop"},{"id":"place-brdwy","type":"stop"},{"id":"place-andrw","type":"stop"},{"id":"place-jfk","type":"stop"},{"id":"place-nqncy","type":"stop"},{"id":"place-qnctr","type":"stop"},{"id":"place-qamnl","type":"stop"},{"id":"place-brntn","type":"stop"}]}},"type":"shape"},{"attributes":{"direction_id":1,"name":"Braintree","polyline":"iyr`GzmjpLWAgAGoBQoCMo@EwBSaCKgMeAs@EcDUsEa@wAOqAIg@EeCSqA?[Bs@Ds@H{@JcB\\\\q@Nw@TiA^mAh@mEvCIFA@MHaGlDqAv@{BlAeHbEg@XULOJWLSJiAr@KFKF[PoBfA{Ar@qD`BmBr@iAXaAVy@P}@Lq@HeAH{@?cAEq@Gk@CSCc@G??qAO}BYMAuAQw@KiBOwBYoCe@mPoCkHmA}@OWCWE_@GkIwA{AWQCMAUEyBa@cGy@oC[_BSuAMiAE{@Bm@FcAPODMDE@YJQDYHq@XeAh@q@\\\\yBdAi@T??u@\\\\m@ZmBlAgCjA{@h@w@l@MJKH[Zw@|@wLzMSTQR[XoE~E]`@sDtDoEzEe@d@sAvAsD~DmPxQsF~F}AtA]ZOLOLm@`@IF??yAxAWXkCzCeAtA{HfJiIzIcLzLuC`D}F`G??{@z@uBxB{@`AkCfCgA`Ac@Xw@`@i@Vy@XiAZwDdAqA`@o@PiAj@gAr@aAt@wAnAUV}@fAKJKNEDMNmAvA}BjC_EbFyDnEgDzDgAfAeBnB_F|FIHIJw@~@aAfAcAhAcDrDSTSTg@n@a@b@iL`NmEhFiCxCqLjNcDpD}DvE}HtIgAz@oAz@IDgAh@_A`@_ARy@LkBHy@@wAIuAOqBa@YEsWgE{D}@yCw@}IoCeDcAgF_BkB_@_AK}BEyHXeE@{@@sEJkCF]Bg@@}AFM@a@D_AN??]FSDUBm@FqCd@}@VgAd@eAr@m@f@g@j@{@hAoAhBkBdD[h@}A|Bq@hAUZ}B|Cm@d@m@\\\\{@XY@MC_@QqBq@{F_C??g@ScnAl@??qCBie@i[y@c@m@QYIu@Gc@?i@DiARm@TQNa@f@uDbNIX??k@hBq@jBs@vBk@bA_JrQUj@??aDfI??[v@Wn@w@pBa@`Aa@fAwBtFc@~@k@hAsCxDwJ~N]|@Mb@K^CFKn@Gb@C\\\\ATCjAEt@GhBEbA??AXGlAAPM`DYjIM|CO|GM|DG|AGxCa@`MUbHs@fJOfD??ATIrB_Ap^s@jRWlJYdHOhGIpBKjAk@bBe@bAaDnGkBzD??m@pAwMpVgArCsBdGkEbPc@nAYb@a@d@eChDwG|HMPEFwCzNK^KVMJIB_@?iAO??kAOmB]gBGm@A[HSL[^a@|@e@fAo@r@iBh@aB^}@BkAGaNq@am@iDQ???sMUyQ~@uCJsBDo@Pc@Xm@l@m@bAaAvBu@pB]hAOx@UdAKr@??i@dD_@lDKlBOpCQjESvHKtEYbJg@rUGjCRnDFv@NbAPjAHRHLLFt@Nt@Vt@j@f@|@Vt@@DR~B@b@HpAFxN","priority":1},"id":"933_0010","links":{"self":"/shapes/933_0010"},"relationships":{"route":{"data":{"id":"Red","type":"route"}},"stops":{"data":[{"id":"place-brntn","type":"stop"},{"id":"place-qamnl","type":"stop"},{"id":"place-qnctr","type":"stop"},{"id":"place-nqncy","type":"stop"},{"id":"place-jfk","type":"stop"},{"id":"place-andrw","type":"stop"},{"id":"place-brdwy","type":"stop"},{"id":"place-sstat","type":"stop"},{"id":"place-dwnxg","type":"stop"},{"id":"place-pktrm","type":"stop"},{"id":"place-chmnl","type":"stop"},{"id":"place-knncl","type":"stop"},{"id":"place-cntsq","type":"stop"},{"id":"place-harsq","type":"stop"},{"id":"place-portr","type":"stop"},{"id":"place-davis","type":"stop"},{"id":"place-alfcl","type":"stop"}]}},"type":"shape"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.shape
            ]

        -- Stops
        , describe "stop"
            [ testOne
                "bus stop"
                "/stops/1"
                """
                {"data":{"attributes":{"address":null,"description":null,"latitude":42.330957,"location_type":0,"longitude":-71.082754,"name":"Washington St opp Ruggles St","platform_code":null,"platform_name":null,"wheelchair_boarding":1},"id":"1","links":{"self":"/stops/1"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=1"}},"parent_station":{"data":null},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.stop
            , testOne
                "subway child stop"
                "/stops/70070"
                """
                {"data":{"attributes":{"address":null,"description":"Central - Red Line - Alewife","latitude":42.365379,"location_type":0,"longitude":-71.103554,"name":"Central","platform_code":null,"platform_name":"Alewife","wheelchair_boarding":1},"id":"70070","links":{"self":"/stops/70070"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=70070"}},"parent_station":{"data":{"id":"place-cntsq","type":"stop"}},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.stop
            , testOne
                "subway parent stop"
                "/stops/place-cntsq"
                """
                {"data":{"attributes":{"address":"Massachusetts Avenue and Prospect Street, Cambridge, MA 02139","description":null,"latitude":42.365486,"location_type":1,"longitude":-71.103802,"name":"Central","platform_code":null,"platform_name":null,"wheelchair_boarding":1},"id":"place-cntsq","links":{"self":"/stops/place-cntsq"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=place-cntsq"}},"parent_station":{"data":null},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.stop
            , testOne
                "entrance"
                "/stops/door-cntsq-pearl"
                """
                {"data":{"attributes":{"address":null,"description":"Central - Pearl St","latitude":42.364831,"location_type":2,"longitude":-71.102989,"name":"Central - Pearl St","platform_code":null,"platform_name":null,"wheelchair_boarding":2},"id":"door-cntsq-pearl","links":{"self":"/stops/door-cntsq-pearl"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=door-cntsq-pearl"}},"parent_station":{"data":{"id":"place-cntsq","type":"stop"}},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.stop
            , testOne
                "pathways node"
                "https://api-v3.mbta.com/stops/node-336-middle"
                """
                {"data":{"attributes":{"address":null,"at_street":null,"description":"Davis - Bottom of Escalator 336","latitude":null,"location_type":3,"longitude":null,"municipality":"Somerville","name":"Davis","on_street":null,"platform_code":null,"platform_name":null,"vehicle_type":null,"wheelchair_boarding":1},"id":"node-336-middle","links":{"self":"/stops/node-336-middle"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=node-336-middle"}},"parent_station":{"data":{"id":"place-davis","type":"stop"}},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.stop
            , testOne
                "parent with children included"
                "/stops/place-cntsq?include=child_stops"
                """
                {"data":{"attributes":{"address":"Massachusetts Avenue and Prospect Street, Cambridge, MA 02139","description":null,"latitude":42.365486,"location_type":1,"longitude":-71.103802,"name":"Central","platform_code":null,"platform_name":null,"wheelchair_boarding":1},"id":"place-cntsq","links":{"self":"/stops/place-cntsq"},"relationships":{"child_stops":{"data":[{"id":"70069","type":"stop"},{"id":"70070","type":"stop"},{"id":"door-cntsq-essex","type":"stop"},{"id":"door-cntsq-ibmass","type":"stop"},{"id":"door-cntsq-obmass","type":"stop"},{"id":"door-cntsq-pearl","type":"stop"},{"id":"door-cntsq-prospect","type":"stop"},{"id":"door-cntsq-western","type":"stop"}]},"facilities":{"links":{"related":"/facilities/?filter[stop]=place-cntsq"}},"parent_station":{"data":null},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},"included":[{"attributes":{"address":null,"description":"Central - Red Line - Ashmont/Braintree","latitude":42.365304,"location_type":0,"longitude":-71.103621,"name":"Central","platform_code":null,"platform_name":"Ashmont/Braintree","wheelchair_boarding":1},"id":"70069","links":{"self":"/stops/70069"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=70069"}},"parent_station":{"data":{"id":"place-cntsq","type":"stop"}},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"address":null,"description":"Central - Red Line - Alewife","latitude":42.365379,"location_type":0,"longitude":-71.103554,"name":"Central","platform_code":null,"platform_name":"Alewife","wheelchair_boarding":1},"id":"70070","links":{"self":"/stops/70070"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=70070"}},"parent_station":{"data":{"id":"place-cntsq","type":"stop"}},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"address":null,"description":"Central - Essex St","latitude":42.364991,"location_type":2,"longitude":-71.102811,"name":"Central - Essex St","platform_code":null,"platform_name":null,"wheelchair_boarding":2},"id":"door-cntsq-essex","links":{"self":"/stops/door-cntsq-essex"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=door-cntsq-essex"}},"parent_station":{"data":{"id":"place-cntsq","type":"stop"}},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"address":null,"description":"Central - Mass Ave","latitude":42.36519,"location_type":2,"longitude":-71.103557,"name":"Central - Mass Ave","platform_code":null,"platform_name":null,"wheelchair_boarding":1},"id":"door-cntsq-ibmass","links":{"self":"/stops/door-cntsq-ibmass"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=door-cntsq-ibmass"}},"parent_station":{"data":{"id":"place-cntsq","type":"stop"}},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"address":null,"description":"Central - Mass Ave","latitude":42.365541,"location_type":2,"longitude":-71.103749,"name":"Central - Mass Ave","platform_code":null,"platform_name":null,"wheelchair_boarding":1},"id":"door-cntsq-obmass","links":{"self":"/stops/door-cntsq-obmass"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=door-cntsq-obmass"}},"parent_station":{"data":{"id":"place-cntsq","type":"stop"}},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"address":null,"description":"Central - Pearl St","latitude":42.364831,"location_type":2,"longitude":-71.102989,"name":"Central - Pearl St","platform_code":null,"platform_name":null,"wheelchair_boarding":2},"id":"door-cntsq-pearl","links":{"self":"/stops/door-cntsq-pearl"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=door-cntsq-pearl"}},"parent_station":{"data":{"id":"place-cntsq","type":"stop"}},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"address":null,"description":"Central - Prospect St","latitude":42.365778,"location_type":2,"longitude":-71.104131,"name":"Central - Prospect St","platform_code":null,"platform_name":null,"wheelchair_boarding":2},"id":"door-cntsq-prospect","links":{"self":"/stops/door-cntsq-prospect"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=door-cntsq-prospect"}},"parent_station":{"data":{"id":"place-cntsq","type":"stop"}},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"address":null,"description":"Central - Western Ave","latitude":42.365635,"location_type":2,"longitude":-71.104304,"name":"Central - Western Ave","platform_code":null,"platform_name":null,"wheelchair_boarding":2},"id":"door-cntsq-western","links":{"self":"/stops/door-cntsq-western"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=door-cntsq-western"}},"parent_station":{"data":{"id":"place-cntsq","type":"stop"}},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.stop
            , testMany
                "multiple"
                "/stops?filter[route]=746"
                """
                {"data":[{"attributes":{"address":"Silver Line Way and Starboard Way, Boston, MA 02210","description":"Silver Line Way before Manulife Building - Silver Line - South Station","latitude":42.347188,"location_type":0,"longitude":-71.038846,"name":"Silver Line Way before Manulife Building","platform_code":null,"platform_name":"South Station","wheelchair_boarding":1},"id":"74614","links":{"self":"/stops/74614"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=74614"}},"parent_station":{"data":null},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"address":"Congress St and World Trade Center Ave, Boston, MA","description":null,"latitude":42.34863,"location_type":1,"longitude":-71.04246,"name":"World Trade Center","platform_code":null,"platform_name":null,"wheelchair_boarding":1},"id":"place-wtcst","links":{"self":"/stops/place-wtcst"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=place-wtcst"}},"parent_station":{"data":null},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"address":"Seaport Blvd and Pittsburg St, Boston, MA","description":null,"latitude":42.35245,"location_type":1,"longitude":-71.04685,"name":"Courthouse","platform_code":null,"platform_name":null,"wheelchair_boarding":1},"id":"place-crtst","links":{"self":"/stops/place-crtst"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=place-crtst"}},"parent_station":{"data":null},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"},{"attributes":{"address":"700 Atlantic Ave, Boston, MA 02110","description":null,"latitude":42.352271,"location_type":1,"longitude":-71.055242,"name":"South Station","platform_code":null,"platform_name":null,"wheelchair_boarding":1},"id":"place-sstat","links":{"self":"/stops/place-sstat"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=place-sstat"}},"parent_station":{"data":null},"recommended_transfers":{},"zone":{"data":{"id":"CR-zone-1A","type":"zone"}}},"type":"stop"},{"attributes":{"address":"Silver Line Way and Starboard Way, Boston, MA 02210","description":"Silver Line Way after Manulife Building - Silver Line - Airport/Design Center/Chelsea","latitude":42.347056,"location_type":0,"longitude":-71.038814,"name":"Silver Line Way after Manulife Building","platform_code":null,"platform_name":"Airport/Design Center/Chelsea","wheelchair_boarding":1},"id":"74624","links":{"self":"/stops/74624"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=74624"}},"parent_station":{"data":null},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.stop
            ]
        , describe "facilities"
            [ testOne
                "BIKE_STORAGE"
                "https://api-v3.mbta.com/facilities/bike-15095"
                """
                {"data":{"attributes":{"latitude":null,"long_name":"Washington St @ Herald St bike rack","longitude":null,"name":"Washington St @ Herald St bike rack","properties":[{"name":"capacity","value":2},{"name":"enclosed","value":2},{"name":"secured","value":2}],"short_name":"Bike rack","type":"BIKE_STORAGE"},"id":"bike-15095","links":{"self":"/facilities/bike-15095"},"relationships":{"stop":{"data":{"id":"15095","type":"stop"}}},"type":"facility"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.facility
            , testOne
                "ELECTRIC_CAR_CHARGERS"
                "https://api-v3.mbta.com/facilities/ev-ER-0168-garage"
                """
                {"data":{"attributes":{"latitude":null,"long_name":"Salem Garage EV Chargers","longitude":null,"name":"Salem Garage EV Chargers","properties":[{"name":"capacity","value":4}],"short_name":"EV Chargers","type":"ELECTRIC_CAR_CHARGERS"},"id":"ev-ER-0168-garage","links":{"self":"/facilities/ev-ER-0168-garage"},"relationships":{"stop":{"data":{"id":"place-ER-0168","type":"stop"}}},"type":"facility"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.facility
            , testOne
                "ELEVATOR"
                "https://api-v3.mbta.com/facilities/990"
                """
                {"data":{"attributes":{"latitude":null,"long_name":"Lansdowne Elevator 990 (Street to South Station platform 2 and bridge)","longitude":null,"name":"Lansdowne Elevator 990 (Street to South Station platform 2 and bridge)","properties":[],"short_name":"Street to South Station platform 2 and bridge","type":"ELEVATOR"},"id":"990","links":{"self":"/facilities/990"},"relationships":{"stop":{"data":{"id":"place-WML-0025","type":"stop"}}},"type":"facility"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.facility
            , testOne
                "ESCALATOR"
                "https://api-v3.mbta.com/facilities/382"
                """
                {"data":{"attributes":{"latitude":null,"long_name":"South Station Escalator 382 (Alewife platform to lobby)","longitude":null,"name":"South Station Escalator 382 (Alewife platform to lobby)","properties":[{"name":"direction","value":"up"},{"name":"excludes-stop","value":70079},{"name":"excludes-stop","value":"South Station"},{"name":"excludes-stop","value":"South Station-01"},{"name":"excludes-stop","value":"South Station-02"},{"name":"excludes-stop","value":"South Station-03"},{"name":"excludes-stop","value":"South Station-04"},{"name":"excludes-stop","value":"South Station-05"},{"name":"excludes-stop","value":"South Station-06"},{"name":"excludes-stop","value":"South Station-07"},{"name":"excludes-stop","value":"South Station-08"},{"name":"excludes-stop","value":"South Station-09"},{"name":"excludes-stop","value":"South Station-10"},{"name":"excludes-stop","value":"South Station-11"},{"name":"excludes-stop","value":"South Station-12"},{"name":"excludes-stop","value":"South Station-13"},{"name":"excludes-stop","value":"door-sstat-atlantic"},{"name":"excludes-stop","value":"door-sstat-bus"},{"name":"excludes-stop","value":"door-sstat-dewey"},{"name":"excludes-stop","value":"door-sstat-finctr"},{"name":"excludes-stop","value":"door-sstat-main"},{"name":"excludes-stop","value":"door-sstat-outmain"},{"name":"excludes-stop","value":"door-sstat-reserve"},{"name":"excludes-stop","value":"door-sstat-summer"},{"name":"excludes-stop","value":"door-sstat-usps"},{"name":"excludes-stop","value":"node-382-lobby"},{"name":"excludes-stop","value":"node-382-rl"},{"name":"excludes-stop","value":"node-386-lobby"},{"name":"excludes-stop","value":"node-387-lobby"},{"name":"excludes-stop","value":"node-388-lobby"},{"name":"excludes-stop","value":"node-388-sl"},{"name":"excludes-stop","value":"node-389-lobby"},{"name":"excludes-stop","value":"node-389-rl"},{"name":"excludes-stop","value":"node-390-rl"},{"name":"excludes-stop","value":"node-390-sl"},{"name":"excludes-stop","value":"node-398-rl"},{"name":"excludes-stop","value":"node-398-sl"},{"name":"excludes-stop","value":"node-399-lobby"},{"name":"excludes-stop","value":"node-399-middle"},{"name":"excludes-stop","value":"node-400-middle"},{"name":"excludes-stop","value":"node-400-rl"},{"name":"excludes-stop","value":"node-411-lobby"},{"name":"excludes-stop","value":"node-411-sl"},{"name":"excludes-stop","value":"node-419-lobby"},{"name":"excludes-stop","value":"node-419-middle"},{"name":"excludes-stop","value":"node-420-middle"},{"name":"excludes-stop","value":"node-420-rl"},{"name":"excludes-stop","value":"node-424-lobby"},{"name":"excludes-stop","value":"node-6476-ground"},{"name":"excludes-stop","value":"node-6476-lobby"},{"name":"excludes-stop","value":"node-901-lobby"},{"name":"excludes-stop","value":"node-901-rl"},{"name":"excludes-stop","value":"node-901-sl"},{"name":"excludes-stop","value":"node-918-lobby"},{"name":"excludes-stop","value":"node-918-rl"},{"name":"excludes-stop","value":"node-918-sl"},{"name":"excludes-stop","value":"node-919-rl"},{"name":"excludes-stop","value":"node-919-sl"},{"name":"excludes-stop","value":"node-926-lobby"},{"name":"excludes-stop","value":"node-927-rl"},{"name":"excludes-stop","value":"node-927-sl"},{"name":"excludes-stop","value":"node-949-lobby"},{"name":"excludes-stop","value":"node-sstat-382stair-lobby"},{"name":"excludes-stop","value":"node-sstat-382stair-rl"},{"name":"excludes-stop","value":"node-sstat-388stair-lobby"},{"name":"excludes-stop","value":"node-sstat-388stair-sl"},{"name":"excludes-stop","value":"node-sstat-389stair-lobby"},{"name":"excludes-stop","value":"node-sstat-389stair-rl"},{"name":"excludes-stop","value":"node-sstat-390stair-rl"},{"name":"excludes-stop","value":"node-sstat-390stair-sl"},{"name":"excludes-stop","value":"node-sstat-398stair-rl"},{"name":"excludes-stop","value":"node-sstat-398stair-sl"},{"name":"excludes-stop","value":"node-sstat-399stair-lobby"},{"name":"excludes-stop","value":"node-sstat-399stair-middle"},{"name":"excludes-stop","value":"node-sstat-400sl-middle"},{"name":"excludes-stop","value":"node-sstat-400sl-sl"},{"name":"excludes-stop","value":"node-sstat-400stair-middle"},{"name":"excludes-stop","value":"node-sstat-400stair-rl"},{"name":"excludes-stop","value":"node-sstat-411stair-lobby"},{"name":"excludes-stop","value":"node-sstat-411stair-sl"},{"name":"excludes-stop","value":"node-sstat-419stair-lobby"},{"name":"excludes-stop","value":"node-sstat-419stair-middle"},{"name":"excludes-stop","value":"node-sstat-420sl-middle"},{"name":"excludes-stop","value":"node-sstat-420sl-sl"},{"name":"excludes-stop","value":"node-sstat-420stair-middle"},{"name":"excludes-stop","value":"node-sstat-420stair-rl"},{"name":"excludes-stop","value":"node-sstat-918stair-lobby"},{"name":"excludes-stop","value":"node-sstat-918stair-sl"},{"name":"excludes-stop","value":"node-sstat-919stair-rl"},{"name":"excludes-stop","value":"node-sstat-919stair-sl"},{"name":"excludes-stop","value":"node-sstat-alewife-farepaid"},{"name":"excludes-stop","value":"node-sstat-alewife-fareunpaid"},{"name":"excludes-stop","value":"node-sstat-ashbrain-farepaid"},{"name":"excludes-stop","value":"node-sstat-ashbrain-fareunpaid"},{"name":"excludes-stop","value":"node-sstat-bldgescdown-ground"},{"name":"excludes-stop","value":"node-sstat-bldgescdown-lobby"},{"name":"excludes-stop","value":"node-sstat-bldgescup-ground"},{"name":"excludes-stop","value":"node-sstat-bldgescup-lobby"},{"name":"excludes-stop","value":"node-sstat-bldgstair-ground"},{"name":"excludes-stop","value":"node-sstat-bldgstair-lobby"},{"name":"excludes-stop","value":"node-sstat-cr-lobby"},{"name":"excludes-stop","value":"node-sstat-deweystair-lobby"},{"name":"excludes-stop","value":"node-sstat-finctrstair-lobby"},{"name":"excludes-stop","value":"node-sstat-north-farepaid"},{"name":"excludes-stop","value":"node-sstat-north-fareunpaid"},{"name":"excludes-stop","value":"node-sstat-outmainstair-lobby"},{"name":"excludes-stop","value":"node-sstat-reservestair-lobby"},{"name":"excludes-stop","value":"node-sstat-south-farepaid"},{"name":"excludes-stop","value":"node-sstat-south-fareunpaid"}],"short_name":"Alewife platform to lobby","type":"ESCALATOR"},"id":"382","links":{"self":"/facilities/382"},"relationships":{"stop":{"data":{"id":"place-sstat","type":"stop"}}},"type":"facility"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.facility
            , testOne
                "PARKING_AREA"
                "https://api-v3.mbta.com/facilities/park-900"
                """
                {"data":{"attributes":{"latitude":42.363172,"long_name":"Watertown Yard Parking Lot","longitude":-71.184674,"name":"Watertown Yard Parking Lot","properties":[{"name":"attended","value":2},{"name":"capacity","value":200},{"name":"capacity-accessible","value":6},{"name":"contact","value":"MBTA Customer Support"},{"name":"contact-phone","value":"617-222-3200"},{"name":"contact-url","value":"http://www.parkmbta.com/"},{"name":"enclosed","value":2},{"name":"fee-daily","value":"Mon-Fri: $2.50 | Sat-Sun: $2.50"},{"name":"fee-monthly","value":"$43.75"},{"name":"municipality","value":"Watertown"},{"name":"operator","value":"Republic Parking System"},{"name":"owner","value":"MBTA"},{"name":"payment-app","value":"PayByPhone"},{"name":"payment-app-id","value":4259},{"name":"payment-app-url","value":"https://www.paybyphone.com/"},{"name":"payment-form-accepted","value":"invoice"},{"name":"payment-form-accepted","value":"mobile-app"},{"name":"weekday-typical-utilization","value":129},{"name":"weekday-utilization-summary","value":"Utilization never crosses 90% of capacity"}],"short_name":"Parking Lot","type":"PARKING_AREA"},"id":"park-900","links":{"self":"/facilities/park-900"},"relationships":{"stop":{"data":{"id":"900","type":"stop"}}},"type":"facility"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.facility
            , testOne
                "PICK_DROP"
                "https://api-v3.mbta.com/facilities/pick-alfcl-garage"
                """
                {"data":{"attributes":{"latitude":42.395598,"long_name":"Alewife Garage Pick-up/Drop-off","longitude":-71.141842,"name":"Alewife Garage Pick-up/Drop-off","properties":[],"short_name":"Garage","type":"PICK_DROP"},"id":"pick-alfcl-garage","links":{"self":"/facilities/pick-alfcl-garage"},"relationships":{"stop":{"data":{"id":"place-alfcl","type":"stop"}}},"type":"facility"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.facility
            , testOne
                "PORTABLE_BOARDING_LIFT"
                "https://api-v3.mbta.com/facilities/portlift-armnl-0"
                """
                {"data":{"attributes":{"latitude":null,"long_name":"Arlington mobile lift (Park Street & North)","longitude":null,"name":"Arlington mobile lift (Park Street & North)","properties":[{"name":"excludes-stop","value":70157},{"name":"note","value":"Significant barriers exist at station, but customers may be able to board/exit train using mobile lift"}],"short_name":"Mobile lift (Park Street & North)","type":"PORTABLE_BOARDING_LIFT"},"id":"portlift-armnl-0","links":{"self":"/facilities/portlift-armnl-0"},"relationships":{"stop":{"data":{"id":"place-armnl","type":"stop"}}},"type":"facility"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.facility
            , testOne
                "ELEVATED_SUBPLATFORM"
                "https://api-v3.mbta.com/facilities/subplat-cedgr-1"
                """
                {"data":{"attributes":{"latitude":null,"long_name":"Cedar Grove mini-high platform (Ashmont)","longitude":null,"name":"Cedar Grove mini-high platform (Ashmont)","properties":[{"name":"excludes-stop","value":70263},{"name":"note","value":"Mini high level platform is available to provide level boarding to certain cars in a train set"}],"short_name":"Mini-high platform (Ashmont)","type":"ELEVATED_SUBPLATFORM"},"id":"subplat-cedgr-1","links":{"self":"/facilities/subplat-cedgr-1"},"relationships":{"stop":{"data":{"id":"place-cedgr","type":"stop"}}},"type":"facility"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.facility
            , testOne
                "with includes"
                "https://api-v3.mbta.com/facilities/subplat-cedgr-1?include=stop"
                """
                {"data":{"attributes":{"latitude":null,"long_name":"Cedar Grove mini-high platform (Ashmont)","longitude":null,"name":"Cedar Grove mini-high platform (Ashmont)","properties":[{"name":"excludes-stop","value":70263},{"name":"note","value":"Mini high level platform is available to provide level boarding to certain cars in a train set"}],"short_name":"Mini-high platform (Ashmont)","type":"ELEVATED_SUBPLATFORM"},"id":"subplat-cedgr-1","links":{"self":"/facilities/subplat-cedgr-1"},"relationships":{"stop":{"data":{"id":"place-cedgr","type":"stop"}}},"type":"facility"},"included":[{"attributes":{"address":"Fellsway St and Milton St, Dorchester, MA 02124","at_street":null,"description":null,"latitude":42.279682,"location_type":1,"longitude":-71.060432,"municipality":"Boston","name":"Cedar Grove","on_street":null,"platform_code":null,"platform_name":null,"vehicle_type":null,"wheelchair_boarding":1},"id":"place-cedgr","links":{"self":"/stops/place-cedgr"},"relationships":{"child_stops":{},"facilities":{"links":{"related":"/facilities/?filter[stop]=place-cedgr"}},"parent_station":{"data":null},"recommended_transfers":{},"zone":{"data":null}},"type":"stop"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.facility
            , testMany
                "multiple"
                "https://api-v3.mbta.com/facilities?filter[stop]=place-NHRML-0127"
                """
                {"data":[{"attributes":{"latitude":42.517377,"long_name":"Anderson/Woburn fare vending machine 202213","longitude":-71.144055,"properties":[{"name":"enclosed","value":1},{"name":"payment-form-accepted","value":"credit-debit-card"}],"short_name":"Fare vending machine 202213","type":"FARE_VENDING_MACHINE"},"id":"fvm-202213","links":{"self":"/facilities/fvm-202213"},"relationships":{"stop":{"data":{"id":"place-NHRML-0127","type":"stop"}}},"type":"facility"},{"attributes":{"latitude":null,"long_name":"Anderson/Woburn high-level platform","longitude":null,"properties":[{"name":"note","value":"Full high level platform is available to provide level boarding to every car in a train set"}],"short_name":"High-level platform","type":"FULLY_ELEVATED_PLATFORM"},"id":"highlevel-NHRML-0127","links":{"self":"/facilities/highlevel-NHRML-0127"},"relationships":{"stop":{"data":{"id":"place-NHRML-0127","type":"stop"}}},"type":"facility"},{"attributes":{"latitude":42.516512,"long_name":"Anderson/Woburn Logan Express Parking Lot","longitude":-71.142813,"properties":[{"name":"attended","value":1},{"name":"capacity","value":880},{"name":"contact","value":"Massport"},{"name":"contact-phone","value":"781-721-0373"},{"name":"contact-url","value":"http://www.massport.com/logan-airport/to-from-logan/transportation-options/logan-express/woburn/"},{"name":"enclosed","value":2},{"name":"fee-daily","value":"$7 overnight"},{"name":"municipality","value":"Woburn"},{"name":"note","value":"Massport is responsible for parking maintenance, payments, and snow removal."},{"name":"operator","value":"Massport"},{"name":"owner","value":"Local transit authority"},{"name":"payment-form-accepted","value":"cash"},{"name":"payment-form-accepted","value":"credit-debit-card"}],"short_name":"Logan Express Parking Lot","type":"PARKING_AREA"},"id":"park-NHRML-0127-airport","links":{"self":"/facilities/park-NHRML-0127-airport"},"relationships":{"stop":{"data":{"id":"place-NHRML-0127","type":"stop"}}},"type":"facility"},{"attributes":{"latitude":42.518544,"long_name":"Anderson/Woburn Park and Ride Parking Lot","longitude":-71.144061,"properties":[{"name":"attended","value":1},{"name":"capacity","value":1200},{"name":"contact","value":"Massport"},{"name":"contact-phone","value":"781-721-0373"},{"name":"contact-url","value":"https://www.lazparking.com/local/woburn-ma/anderson-regional-transportation-center"},{"name":"enclosed","value":2},{"name":"fee-daily","value":"$4"},{"name":"fee-monthly","value":"$70"},{"name":"municipality","value":"Woburn"},{"name":"note","value":"Massport is responsible for parking maintenance, payments, and snow removal."},{"name":"operator","value":"LAZ Parking"},{"name":"owner","value":"Local transit authority"},{"name":"payment-form-accepted","value":"cash"},{"name":"payment-form-accepted","value":"credit-debit-card"}],"short_name":"Park and Ride Parking Lot","type":"PARKING_AREA"},"id":"park-NHRML-0127-parkride","links":{"self":"/facilities/park-NHRML-0127-parkride"},"relationships":{"stop":{"data":{"id":"place-NHRML-0127","type":"stop"}}},"type":"facility"},{"attributes":{"latitude":null,"long_name":"Anderson/Woburn ramp access","longitude":null,"properties":[],"short_name":"Ramp access","type":"RAMP"},"id":"ramp-NHRML-0127","links":{"self":"/facilities/ramp-NHRML-0127"},"relationships":{"stop":{"data":{"id":"place-NHRML-0127","type":"stop"}}},"type":"facility"},{"attributes":{"latitude":42.5173642,"long_name":"Anderson Regional Transportation Center","longitude":-71.144242,"properties":[{"name":"address","value":"100 Atlantic Ave, Woburn, MA 01801"},{"name":"contact-phone","value":"781-721-0373"},{"name":"dispenses","value":"fare-media"},{"name":"enclosed","value":1},{"name":"payment-form-accepted","value":"cash"},{"name":"payment-form-accepted","value":"credit-debit-card"}],"short_name":"Anderson Regional Transportation Center","type":"FARE_VENDING_RETAILER"},"id":"retailsale-302194","links":{"self":"/facilities/retailsale-302194"},"relationships":{"stop":{"data":{"id":"place-NHRML-0127","type":"stop"}}},"type":"facility"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.facility
            ]
        , describe "live-facilities"
            [ testOne
                "one"
                "https://api-v3.mbta.com/live-facilities/park-alfcl-garage"
                """
                {"data":{"attributes":{"properties":[{"name":"capacity","value":2270},{"name":"utilization","value":452},{"name":"status","value":null}],"updated_at":"2019-08-04T16:14:59-04:00"},"id":"park-alfcl-garage","links":{"self":"/live_facilities/park-alfcl-garage"},"relationships":{"facility":{"data":{"id":"park-alfcl-garage","type":"facility"}}},"type":"live-facility"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.liveFacility
            , testOne
                "with include"
                "https://api-v3.mbta.com/live-facilities/park-alfcl-garage?include=facility"
                """
                {"data":{"attributes":{"properties":[{"name":"capacity","value":2270},{"name":"utilization","value":452},{"name":"status","value":null}],"updated_at":"2019-08-04T16:14:59-04:00"},"id":"park-alfcl-garage","links":{"self":"/live_facilities/park-alfcl-garage"},"relationships":{"facility":{"data":{"id":"park-alfcl-garage","type":"facility"}}},"type":"live-facility"},"included":[{"attributes":{"latitude":42.395428,"long_name":"Alewife Garage","longitude":-71.142483,"name":"Alewife Garage","properties":[{"name":"attended","value":1},{"name":"capacity","value":2471},{"name":"capacity-accessible","value":32},{"name":"car-sharing","value":"Zipcar"},{"name":"contact","value":"MBTA Customer Support"},{"name":"contact-phone","value":"617-222-3200"},{"name":"contact-url","value":"http://www.parkmbta.com/"},{"name":"enclosed","value":1},{"name":"fee-daily","value":"Mon-Fri: $9 | Sat-Sun: $3 (Prices are valid for up to 14 hours of parking. After the first 14 hours, the daily rate is $15.)"},{"name":"fee-monthly","value":"Monthly passes are not available at MBTA garages."},{"name":"municipality","value":"Cambridge"},{"name":"operator","value":"Republic Parking System"},{"name":"owner","value":"MBTA"},{"name":"payment-form-accepted","value":"cash"},{"name":"payment-form-accepted","value":"credit-debit-card"},{"name":"payment-form-accepted","value":"tapcard"},{"name":"weekday-utilization-summary","value":"No data"}],"short_name":"Garage","type":"PARKING_AREA"},"id":"park-alfcl-garage","links":{"self":"/facilities/park-alfcl-garage"},"relationships":{"stop":{"data":{"id":"place-alfcl","type":"stop"}}},"type":"facility"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.liveFacility
            , testMany
                "multiple"
                "https://api-v3.mbta.com/live-facilities?filter[id]=park-alfcl-garage,park-ER-0168-garage"
                """
                {"data":[{"attributes":{"properties":[{"name":"capacity","value":676},{"name":"utilization","value":42},{"name":"status","value":null}],"updated_at":"2019-08-04T16:14:59-04:00"},"id":"park-ER-0168-garage","links":{"self":"/live_facilities/park-ER-0168-garage"},"relationships":{"facility":{"data":{"id":"park-ER-0168-garage","type":"facility"}}},"type":"live-facility"},{"attributes":{"properties":[{"name":"capacity","value":2270},{"name":"utilization","value":452},{"name":"status","value":null}],"updated_at":"2019-08-04T16:14:59-04:00"},"id":"park-alfcl-garage","links":{"self":"/live_facilities/park-alfcl-garage"},"relationships":{"facility":{"data":{"id":"park-alfcl-garage","type":"facility"}}},"type":"live-facility"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.liveFacility
            ]

        -- Alerts
        , describe "alerts"
            [ testOne
                "subway shuttles"
                "https://api-v3.mbta.com/alerts/305816"
                """
                {"data":{"attributes":{"active_period":[{"end":"2019-05-11T02:30:00-04:00","start":"2019-05-10T20:30:00-04:00"},{"end":"2019-05-12T02:30:00-04:00","start":"2019-05-11T20:30:00-04:00"},{"end":"2019-05-13T02:30:00-04:00","start":"2019-05-12T20:30:00-04:00"},{"end":"2019-05-18T02:30:00-04:00","start":"2019-05-17T20:30:00-04:00"},{"end":"2019-05-19T02:30:00-04:00","start":"2019-05-18T20:30:00-04:00"},{"end":"2019-05-20T02:30:00-04:00","start":"2019-05-19T20:30:00-04:00"},{"end":"2019-05-25T02:30:00-04:00","start":"2019-05-24T20:30:00-04:00"},{"end":"2019-05-26T02:30:00-04:00","start":"2019-05-25T20:30:00-04:00"},{"end":"2019-05-27T02:30:00-04:00","start":"2019-05-26T20:30:00-04:00"},{"end":"2019-06-01T02:30:00-04:00","start":"2019-05-31T20:30:00-04:00"},{"end":"2019-06-02T02:30:00-04:00","start":"2019-06-01T20:30:00-04:00"},{"end":"2019-06-03T02:30:00-04:00","start":"2019-06-02T20:30:00-04:00"}],"banner":null,"cause":"MAINTENANCE","created_at":"2019-04-18T12:05:41-04:00","description":"Bus shuttles replace train service between Babcock St and Boston College in both directions from Friday evenings at 8:30 PM through the end of service Sundays. The diversion allows crews to perform necessary rail, tie, and track work. All shuttles are fully accessible. Regular train service resumes at start of service Monday.  Affected stops: Babcock Street Packards Corner Harvard Avenue Griggs Street Allston Street Warren Street Washington Street Sutherland Road Chiswick Road Chestnut Hill Avenue South Street Boston College","effect":"SHUTTLE","header":"Shuttle buses replace Green Line B Branch service between Babcock St and Boston College from 8:30 PM on Fridays through the end of service on Sundays from May 10 to June 2 for track work.","informed_entity":[{"activities":["BOARD","RIDE"],"route":"Green-B","route_type":0,"stop":"70106"},{"activities":["BOARD","RIDE"],"route":"Green-B","route_type":0,"stop":"place-lake"},{"activities":["EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70107"},{"activities":["EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"place-lake"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70110"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"place-sougr"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70111"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70112"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"place-chill"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70113"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70114"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"place-chswk"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70115"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70116"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"place-sthld"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70117"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70120"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"place-wascm"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70121"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70124"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"place-wrnst"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70125"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70126"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"place-alsgr"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70127"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70128"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"place-grigg"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70129"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70130"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"place-harvd"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70131"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70134"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"place-brico"},{"activities":["BOARD","EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70135"},{"activities":["EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"70136"},{"activities":["EXIT","RIDE"],"route":"Green-B","route_type":0,"stop":"place-babck"},{"activities":["BOARD","RIDE"],"route":"Green-B","route_type":0,"stop":"70137"},{"activities":["BOARD","RIDE"],"route":"Green-B","route_type":0,"stop":"place-babck"}],"lifecycle":"UPCOMING","service_effect":"Green Line B branch shuttle","severity":7,"short_header":"Shuttle buses replace Green Ln B service btw Babcock St & Boston College from 8:30pm on Fri until closing Sundays from 5/10 - 6/2.","timeframe":"starting Friday","updated_at":"2019-04-18T12:08:43-04:00","url":null},"id":"305816","links":{"self":"/alerts/305816"},"type":"alert"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.alert
            , testMany
                "commuter rail schedule change"
                "https://api-v3.mbta.com/alerts?filter[route]=CR-Fairmount"
                """
                {"data":[{"attributes":{"active_period":[{"end":"2019-05-21T02:30:00-04:00","start":"2019-05-02T14:09:40-04:00"}],"banner":null,"cause":"UNKNOWN_CAUSE","created_at":"2019-05-02T14:14:37-04:00","description":"Affected routes: Newburyport/Rockport Line Haverhill Line Lowell Line Fitchburg Line Framingham/Worcester Line Needham Line Franklin Line Fairmount Line Providence/Stoughton Line Middleborough/Lakeville Line Kingston/Plymouth Line Greenbush Line","effect":"SCHEDULE_CHANGE","header":"Spring/Summer Commuter Rail schedules go into effect on Monday, May 20th and are now available on the MBTA website at mbta.com.","informed_entity":[{"activities":["BOARD","EXIT","RIDE"],"route":"CR-Fairmount","route_type":2},{"activities":["BOARD","EXIT","RIDE"],"route":"CR-Fitchburg","route_type":2},{"activities":["BOARD","EXIT","RIDE"],"route":"CR-Franklin","route_type":2},{"activities":["BOARD","EXIT","RIDE"],"route":"CR-Greenbush","route_type":2},{"activities":["BOARD","EXIT","RIDE"],"route":"CR-Haverhill","route_type":2},{"activities":["BOARD","EXIT","RIDE"],"route":"CR-Kingston","route_type":2},{"activities":["BOARD","EXIT","RIDE"],"route":"CR-Lowell","route_type":2},{"activities":["BOARD","EXIT","RIDE"],"route":"CR-Middleborough","route_type":2},{"activities":["BOARD","EXIT","RIDE"],"route":"CR-Needham","route_type":2},{"activities":["BOARD","EXIT","RIDE"],"route":"CR-Newburyport","route_type":2},{"activities":["BOARD","EXIT","RIDE"],"route":"CR-Providence","route_type":2},{"activities":["BOARD","EXIT","RIDE"],"route":"CR-Worcester","route_type":2}],"lifecycle":"NEW","service_effect":"Commuter Rail schedule change","severity":1,"short_header":"Spring/Summer Commuter Rail schedules go into effect on Monday, May 20th and are now available on the MBTA website at mbta.com.","timeframe":"through May 20","updated_at":"2019-05-02T14:14:37-04:00","url":null},"id":"308355","links":{"self":"/alerts/308355"},"type":"alert"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.alert
            , testOne
                "bus detour"
                "https://api-v3.mbta.com/alerts/308506"
                """
                {"data":{"attributes":{"active_period":[{"end":null,"start":"2019-05-03T10:43:42-04:00"}],"banner":null,"cause":"UNKNOWN_CAUSE","created_at":"2019-05-03T10:43:43-04:00","description":"Affected direction: Inbound   Affected stops:  P St @ E 2nd St   Connections:  E 1st St @ O St  P St @ E Broadway  Route 9# L St @ E 2nd St  Route #11 P St @ E 5th St","effect":"SERVICE_CHANGE","header":"Inbound routes 5, 7, 9, 10 & 11 detoured because of construction. Connections can be made at E 1st St @ O St, L St @ E 2nd St , P St @ E 5th St, P St @ E Broadway.","informed_entity":[{"activities":["BOARD","EXIT","RIDE"],"route":"10","route_type":3},{"activities":["BOARD","EXIT","RIDE"],"route":"11","route_type":3},{"activities":["BOARD","EXIT","RIDE"],"route":"5","route_type":3},{"activities":["BOARD","EXIT","RIDE"],"route":"7","route_type":3},{"activities":["BOARD","EXIT","RIDE"],"route":"9","route_type":3}],"lifecycle":"NEW","service_effect":"Bus notice","severity":5,"short_header":"Inb. rts. 5, 7, 9, 10 & 11 detoured because of construction. ","timeframe":null,"updated_at":"2019-05-03T10:43:43-04:00","url":null},"id":"308506","links":{"self":"/alerts/308506"},"type":"alert"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.alert
            , testOne
                "elevator alert"
                "https://api-v3.mbta.com/alerts/293731"
                """
                {"data":{"attributes":{"active_period":[{"end":null,"start":"2019-02-02T09:44:09-05:00"}],"banner":null,"cause":"MAINTENANCE","created_at":"2019-02-02T09:44:24-05:00","description":"Riders looking to exit the Red Line at Central should exit at Kendall. Shuttle pick-up as located at Main St near station entrance for Alewife platform. Riders looking to board at Central should use shuttle service to Kendall. Shuttle pick-up is located on Mass Ave near Elevator 861. Please see an MBTA employee or access a station call box to request shuttle at both Central and Kendall.  Unavailable Elevator: Central Elevator 861 (Ashmont/Braintree plat. to street)","effect":"ELEVATOR_CLOSURE","header":"All elevators at Central south (Ashmont/Braintree) are out of service through Summer 2019 for replacement. Shuttle service available to/from Central and Kendall stations. Please see an MBTA employee or access a station call box for shuttle.","informed_entity":[{"activities":["USING_WHEELCHAIR"],"facility":"861","stop":"70069"},{"activities":["USING_WHEELCHAIR"],"facility":"861","stop":"place-cntsq"},{"activities":["USING_WHEELCHAIR"],"facility":"861","stop":"door-cntsq-ibmass"}],"lifecycle":"ONGOING","service_effect":"elevator unavailable","severity":5,"short_header":"All elevators at Central south are out of service through Summer 2019 for replacement. Shuttle service available to/from Central & Kendall s","timeframe":"ongoing","updated_at":"2019-05-03T08:02:22-04:00","url":null},"id":"293731","links":{"self":"/alerts/293731"},"type":"alert"},"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.alert
            , testMany
                "with includes"
                "https://api-v3.mbta.com/alerts?filter[id]=308506,270677"
                """
                {"data":[{"attributes":{"active_period":[{"end":"2019-08-05T21:47:00-04:00","start":"2019-08-05T15:50:00-04:00"},{"end":"2019-08-06T21:47:00-04:00","start":"2019-08-06T15:50:00-04:00"},{"end":"2019-08-07T21:47:00-04:00","start":"2019-08-07T15:50:00-04:00"},{"end":"2019-08-08T21:47:00-04:00","start":"2019-08-08T15:50:00-04:00"},{"end":"2019-08-09T21:47:00-04:00","start":"2019-08-09T15:50:00-04:00"},{"end":"2019-08-12T21:47:00-04:00","start":"2019-08-12T15:50:00-04:00"},{"end":"2019-08-13T21:47:00-04:00","start":"2019-08-13T15:50:00-04:00"},{"end":"2019-08-14T21:47:00-04:00","start":"2019-08-14T15:50:00-04:00"},{"end":"2019-08-15T21:47:00-04:00","start":"2019-08-15T15:50:00-04:00"},{"end":"2019-08-16T21:47:00-04:00","start":"2019-08-16T15:50:00-04:00"},{"end":"2019-08-19T21:47:00-04:00","start":"2019-08-19T15:50:00-04:00"},{"end":"2019-08-20T21:47:00-04:00","start":"2019-08-20T15:50:00-04:00"},{"end":"2019-08-21T21:47:00-04:00","start":"2019-08-21T15:50:00-04:00"},{"end":"2019-08-22T21:47:00-04:00","start":"2019-08-22T15:50:00-04:00"},{"end":"2019-08-23T21:47:00-04:00","start":"2019-08-23T15:50:00-04:00"},{"end":"2019-08-26T21:47:00-04:00","start":"2019-08-26T15:50:00-04:00"},{"end":"2019-08-27T21:47:00-04:00","start":"2019-08-27T15:50:00-04:00"},{"end":"2019-08-28T21:47:00-04:00","start":"2019-08-28T15:50:00-04:00"},{"end":"2019-08-29T21:47:00-04:00","start":"2019-08-29T15:50:00-04:00"},{"end":"2019-08-30T21:47:00-04:00","start":"2019-08-30T15:50:00-04:00"},{"end":"2019-09-02T21:47:00-04:00","start":"2019-09-02T15:50:00-04:00"},{"end":"2019-09-03T21:47:00-04:00","start":"2019-09-03T15:50:00-04:00"},{"end":"2019-09-04T21:47:00-04:00","start":"2019-09-04T15:50:00-04:00"},{"end":"2019-09-05T21:47:00-04:00","start":"2019-09-05T15:50:00-04:00"},{"end":"2019-09-06T21:47:00-04:00","start":"2019-09-06T15:50:00-04:00"},{"end":"2019-09-09T21:47:00-04:00","start":"2019-09-09T15:50:00-04:00"},{"end":"2019-09-10T21:47:00-04:00","start":"2019-09-10T15:50:00-04:00"},{"end":"2019-09-11T21:47:00-04:00","start":"2019-09-11T15:50:00-04:00"},{"end":"2019-09-12T21:47:00-04:00","start":"2019-09-12T15:50:00-04:00"},{"end":"2019-09-13T21:47:00-04:00","start":"2019-09-13T15:50:00-04:00"},{"end":"2019-09-16T21:47:00-04:00","start":"2019-09-16T15:50:00-04:00"},{"end":"2019-09-17T21:47:00-04:00","start":"2019-09-17T15:50:00-04:00"},{"end":"2019-09-18T21:47:00-04:00","start":"2019-09-18T15:50:00-04:00"},{"end":"2019-09-19T21:47:00-04:00","start":"2019-09-19T15:50:00-04:00"},{"end":"2019-09-20T21:47:00-04:00","start":"2019-09-20T15:50:00-04:00"},{"end":"2019-09-23T21:47:00-04:00","start":"2019-09-23T15:50:00-04:00"},{"end":"2019-09-24T21:47:00-04:00","start":"2019-09-24T15:50:00-04:00"},{"end":"2019-09-25T21:47:00-04:00","start":"2019-09-25T15:50:00-04:00"},{"end":"2019-09-26T21:47:00-04:00","start":"2019-09-26T15:50:00-04:00"},{"end":"2019-09-27T21:47:00-04:00","start":"2019-09-27T15:50:00-04:00"},{"end":"2019-09-30T21:47:00-04:00","start":"2019-09-30T15:50:00-04:00"},{"end":"2019-10-01T21:47:00-04:00","start":"2019-10-01T15:50:00-04:00"},{"end":"2019-10-02T21:47:00-04:00","start":"2019-10-02T15:50:00-04:00"},{"end":"2019-10-03T21:47:00-04:00","start":"2019-10-03T15:50:00-04:00"},{"end":"2019-10-04T21:47:00-04:00","start":"2019-10-04T15:50:00-04:00"},{"end":"2019-10-07T21:47:00-04:00","start":"2019-10-07T15:50:00-04:00"},{"end":"2019-10-08T21:47:00-04:00","start":"2019-10-08T15:50:00-04:00"},{"end":"2019-10-09T21:47:00-04:00","start":"2019-10-09T15:50:00-04:00"},{"end":"2019-10-10T21:47:00-04:00","start":"2019-10-10T15:50:00-04:00"},{"end":"2019-10-11T21:47:00-04:00","start":"2019-10-11T15:50:00-04:00"},{"end":"2019-10-14T21:47:00-04:00","start":"2019-10-14T15:50:00-04:00"},{"end":"2019-10-15T21:47:00-04:00","start":"2019-10-15T15:50:00-04:00"},{"end":"2019-10-16T21:47:00-04:00","start":"2019-10-16T15:50:00-04:00"},{"end":"2019-10-17T21:47:00-04:00","start":"2019-10-17T15:50:00-04:00"},{"end":"2019-10-18T21:47:00-04:00","start":"2019-10-18T15:50:00-04:00"},{"end":"2019-10-21T21:47:00-04:00","start":"2019-10-21T15:50:00-04:00"},{"end":"2019-10-22T21:47:00-04:00","start":"2019-10-22T15:50:00-04:00"},{"end":"2019-10-23T21:47:00-04:00","start":"2019-10-23T15:50:00-04:00"},{"end":"2019-10-24T21:47:00-04:00","start":"2019-10-24T15:50:00-04:00"},{"end":"2019-10-25T21:47:00-04:00","start":"2019-10-25T15:50:00-04:00"},{"end":"2019-10-28T21:47:00-04:00","start":"2019-10-28T15:50:00-04:00"},{"end":"2019-10-29T21:47:00-04:00","start":"2019-10-29T15:50:00-04:00"},{"end":"2019-10-30T21:47:00-04:00","start":"2019-10-30T15:50:00-04:00"},{"end":"2019-10-31T21:47:00-04:00","start":"2019-10-31T15:50:00-04:00"},{"end":"2019-11-01T21:47:00-04:00","start":"2019-11-01T15:50:00-04:00"},{"end":"2019-11-04T21:47:00-05:00","start":"2019-11-04T15:50:00-05:00"},{"end":"2019-11-05T21:47:00-05:00","start":"2019-11-05T15:50:00-05:00"},{"end":"2019-11-06T21:47:00-05:00","start":"2019-11-06T15:50:00-05:00"},{"end":"2019-11-07T21:47:00-05:00","start":"2019-11-07T15:50:00-05:00"},{"end":"2019-11-08T21:47:00-05:00","start":"2019-11-08T15:50:00-05:00"},{"end":"2019-11-11T21:47:00-05:00","start":"2019-11-11T15:50:00-05:00"},{"end":"2019-11-12T21:47:00-05:00","start":"2019-11-12T15:50:00-05:00"},{"end":"2019-11-13T21:47:00-05:00","start":"2019-11-13T15:50:00-05:00"},{"end":"2019-11-14T21:47:00-05:00","start":"2019-11-14T15:50:00-05:00"},{"end":"2019-11-15T21:47:00-05:00","start":"2019-11-15T15:50:00-05:00"},{"end":"2019-11-18T21:47:00-05:00","start":"2019-11-18T15:50:00-05:00"},{"end":"2019-11-19T21:47:00-05:00","start":"2019-11-19T15:50:00-05:00"},{"end":"2019-11-20T21:47:00-05:00","start":"2019-11-20T15:50:00-05:00"},{"end":"2019-11-21T21:47:00-05:00","start":"2019-11-21T15:50:00-05:00"},{"end":"2019-11-22T21:47:00-05:00","start":"2019-11-22T15:50:00-05:00"},{"end":"2019-11-25T21:47:00-05:00","start":"2019-11-25T15:50:00-05:00"},{"end":"2019-11-26T21:47:00-05:00","start":"2019-11-26T15:50:00-05:00"},{"end":"2019-11-27T21:47:00-05:00","start":"2019-11-27T15:50:00-05:00"},{"end":"2019-11-28T21:47:00-05:00","start":"2019-11-28T15:50:00-05:00"},{"end":"2019-11-29T21:47:00-05:00","start":"2019-11-29T15:50:00-05:00"},{"end":"2019-12-02T21:47:00-05:00","start":"2019-12-02T15:50:00-05:00"},{"end":"2019-12-03T21:47:00-05:00","start":"2019-12-03T15:50:00-05:00"},{"end":"2019-12-04T21:47:00-05:00","start":"2019-12-04T15:50:00-05:00"},{"end":"2019-12-05T21:47:00-05:00","start":"2019-12-05T15:50:00-05:00"},{"end":"2019-12-06T21:47:00-05:00","start":"2019-12-06T15:50:00-05:00"},{"end":"2019-12-09T21:47:00-05:00","start":"2019-12-09T15:50:00-05:00"},{"end":"2019-12-10T21:47:00-05:00","start":"2019-12-10T15:50:00-05:00"},{"end":"2019-12-11T21:47:00-05:00","start":"2019-12-11T15:50:00-05:00"},{"end":"2019-12-12T21:47:00-05:00","start":"2019-12-12T15:50:00-05:00"},{"end":"2019-12-13T21:47:00-05:00","start":"2019-12-13T15:50:00-05:00"},{"end":"2019-12-16T21:47:00-05:00","start":"2019-12-16T15:50:00-05:00"},{"end":"2019-12-17T21:47:00-05:00","start":"2019-12-17T15:50:00-05:00"},{"end":"2019-12-18T21:47:00-05:00","start":"2019-12-18T15:50:00-05:00"},{"end":"2019-12-19T21:47:00-05:00","start":"2019-12-19T15:50:00-05:00"},{"end":"2019-12-20T21:47:00-05:00","start":"2019-12-20T15:50:00-05:00"},{"end":"2019-12-23T21:47:00-05:00","start":"2019-12-23T15:50:00-05:00"},{"end":"2019-12-24T21:47:00-05:00","start":"2019-12-24T15:50:00-05:00"},{"end":"2019-12-25T21:47:00-05:00","start":"2019-12-25T15:50:00-05:00"},{"end":"2019-12-26T21:47:00-05:00","start":"2019-12-26T15:50:00-05:00"},{"end":"2019-12-27T21:47:00-05:00","start":"2019-12-27T15:50:00-05:00"},{"end":"2019-12-30T21:47:00-05:00","start":"2019-12-30T15:50:00-05:00"},{"end":"2019-12-31T21:47:00-05:00","start":"2019-12-31T15:50:00-05:00"},{"end":"2020-01-01T21:47:00-05:00","start":"2020-01-01T15:50:00-05:00"},{"end":"2020-01-02T21:47:00-05:00","start":"2020-01-02T15:50:00-05:00"},{"end":"2020-01-03T21:47:00-05:00","start":"2020-01-03T15:50:00-05:00"},{"end":"2020-01-06T21:47:00-05:00","start":"2020-01-06T15:50:00-05:00"},{"end":"2020-01-07T21:47:00-05:00","start":"2020-01-07T15:50:00-05:00"},{"end":"2020-01-08T21:47:00-05:00","start":"2020-01-08T15:50:00-05:00"},{"end":"2020-01-09T21:47:00-05:00","start":"2020-01-09T15:50:00-05:00"},{"end":"2020-01-10T21:47:00-05:00","start":"2020-01-10T15:50:00-05:00"},{"end":"2020-01-13T21:47:00-05:00","start":"2020-01-13T15:50:00-05:00"},{"end":"2020-01-14T21:47:00-05:00","start":"2020-01-14T15:50:00-05:00"},{"end":"2020-01-15T21:47:00-05:00","start":"2020-01-15T15:50:00-05:00"},{"end":"2020-01-16T21:47:00-05:00","start":"2020-01-16T15:50:00-05:00"},{"end":"2020-01-17T21:47:00-05:00","start":"2020-01-17T15:50:00-05:00"},{"end":"2020-01-20T21:47:00-05:00","start":"2020-01-20T15:50:00-05:00"},{"end":"2020-01-21T21:47:00-05:00","start":"2020-01-21T15:50:00-05:00"},{"end":"2020-01-22T21:47:00-05:00","start":"2020-01-22T15:50:00-05:00"},{"end":"2020-01-23T21:47:00-05:00","start":"2020-01-23T15:50:00-05:00"},{"end":"2020-01-24T21:47:00-05:00","start":"2020-01-24T15:50:00-05:00"},{"end":"2020-01-27T21:47:00-05:00","start":"2020-01-27T15:50:00-05:00"},{"end":"2020-01-28T21:47:00-05:00","start":"2020-01-28T15:50:00-05:00"},{"end":"2020-01-29T21:47:00-05:00","start":"2020-01-29T15:50:00-05:00"},{"end":"2020-01-30T21:47:00-05:00","start":"2020-01-30T15:50:00-05:00"},{"end":"2020-01-31T21:47:00-05:00","start":"2020-01-31T15:50:00-05:00"},{"end":"2020-02-03T21:47:00-05:00","start":"2020-02-03T15:50:00-05:00"},{"end":"2020-02-04T21:47:00-05:00","start":"2020-02-04T15:50:00-05:00"},{"end":"2020-02-05T21:47:00-05:00","start":"2020-02-05T15:50:00-05:00"},{"end":"2020-02-06T21:47:00-05:00","start":"2020-02-06T15:50:00-05:00"},{"end":"2020-02-07T21:47:00-05:00","start":"2020-02-07T15:50:00-05:00"},{"end":"2020-02-10T21:47:00-05:00","start":"2020-02-10T15:50:00-05:00"},{"end":"2020-02-11T21:47:00-05:00","start":"2020-02-11T15:50:00-05:00"},{"end":"2020-02-12T21:47:00-05:00","start":"2020-02-12T15:50:00-05:00"},{"end":"2020-02-13T21:47:00-05:00","start":"2020-02-13T15:50:00-05:00"},{"end":"2020-02-14T21:47:00-05:00","start":"2020-02-14T15:50:00-05:00"},{"end":"2020-02-17T21:47:00-05:00","start":"2020-02-17T15:50:00-05:00"},{"end":"2020-02-18T21:47:00-05:00","start":"2020-02-18T15:50:00-05:00"},{"end":"2020-02-19T21:47:00-05:00","start":"2020-02-19T15:50:00-05:00"},{"end":"2020-02-20T21:47:00-05:00","start":"2020-02-20T15:50:00-05:00"},{"end":"2020-02-21T21:47:00-05:00","start":"2020-02-21T15:50:00-05:00"},{"end":"2020-02-24T21:47:00-05:00","start":"2020-02-24T15:50:00-05:00"},{"end":"2020-02-25T21:47:00-05:00","start":"2020-02-25T15:50:00-05:00"},{"end":"2020-02-26T21:47:00-05:00","start":"2020-02-26T15:50:00-05:00"},{"end":"2020-02-27T21:47:00-05:00","start":"2020-02-27T15:50:00-05:00"},{"end":"2020-02-28T21:47:00-05:00","start":"2020-02-28T15:50:00-05:00"},{"end":"2020-03-02T21:47:00-05:00","start":"2020-03-02T15:50:00-05:00"},{"end":"2020-03-03T21:47:00-05:00","start":"2020-03-03T15:50:00-05:00"},{"end":"2020-03-04T21:47:00-05:00","start":"2020-03-04T15:50:00-05:00"},{"end":"2020-03-05T21:47:00-05:00","start":"2020-03-05T15:50:00-05:00"},{"end":"2020-03-06T21:47:00-05:00","start":"2020-03-06T15:50:00-05:00"},{"end":"2020-03-09T21:47:00-04:00","start":"2020-03-09T15:50:00-04:00"},{"end":"2020-03-10T21:47:00-04:00","start":"2020-03-10T15:50:00-04:00"},{"end":"2020-03-11T21:47:00-04:00","start":"2020-03-11T15:50:00-04:00"},{"end":"2020-03-12T21:47:00-04:00","start":"2020-03-12T15:50:00-04:00"},{"end":"2020-03-13T21:47:00-04:00","start":"2020-03-13T15:50:00-04:00"},{"end":"2020-03-16T21:47:00-04:00","start":"2020-03-16T15:50:00-04:00"},{"end":"2020-03-17T21:47:00-04:00","start":"2020-03-17T15:50:00-04:00"},{"end":"2020-03-18T21:47:00-04:00","start":"2020-03-18T15:50:00-04:00"},{"end":"2020-03-19T21:47:00-04:00","start":"2020-03-19T15:50:00-04:00"},{"end":"2020-03-20T21:47:00-04:00","start":"2020-03-20T15:50:00-04:00"},{"end":"2020-03-23T21:47:00-04:00","start":"2020-03-23T15:50:00-04:00"},{"end":"2020-03-24T21:47:00-04:00","start":"2020-03-24T15:50:00-04:00"},{"end":"2020-03-25T21:47:00-04:00","start":"2020-03-25T15:50:00-04:00"},{"end":"2020-03-26T21:47:00-04:00","start":"2020-03-26T15:50:00-04:00"},{"end":"2020-03-27T21:47:00-04:00","start":"2020-03-27T15:50:00-04:00"},{"end":"2020-03-30T21:47:00-04:00","start":"2020-03-30T15:50:00-04:00"},{"end":"2020-03-31T21:47:00-04:00","start":"2020-03-31T15:50:00-04:00"},{"end":"2020-04-01T21:47:00-04:00","start":"2020-04-01T15:50:00-04:00"},{"end":"2020-04-02T21:47:00-04:00","start":"2020-04-02T15:50:00-04:00"},{"end":"2020-04-03T21:47:00-04:00","start":"2020-04-03T15:50:00-04:00"},{"end":"2020-04-06T21:47:00-04:00","start":"2020-04-06T15:50:00-04:00"},{"end":"2020-04-07T21:47:00-04:00","start":"2020-04-07T15:50:00-04:00"},{"end":"2020-04-08T21:47:00-04:00","start":"2020-04-08T15:50:00-04:00"},{"end":"2020-04-09T21:47:00-04:00","start":"2020-04-09T15:50:00-04:00"},{"end":"2020-04-10T21:47:00-04:00","start":"2020-04-10T15:50:00-04:00"},{"end":"2020-04-13T21:47:00-04:00","start":"2020-04-13T15:50:00-04:00"},{"end":"2020-04-14T21:47:00-04:00","start":"2020-04-14T15:50:00-04:00"},{"end":"2020-04-15T21:47:00-04:00","start":"2020-04-15T15:50:00-04:00"},{"end":"2020-04-16T21:47:00-04:00","start":"2020-04-16T15:50:00-04:00"},{"end":"2020-04-17T21:47:00-04:00","start":"2020-04-17T15:50:00-04:00"},{"end":"2020-04-20T21:47:00-04:00","start":"2020-04-20T15:50:00-04:00"},{"end":"2020-04-21T21:47:00-04:00","start":"2020-04-21T15:50:00-04:00"},{"end":"2020-04-22T21:47:00-04:00","start":"2020-04-22T15:50:00-04:00"},{"end":"2020-04-23T21:47:00-04:00","start":"2020-04-23T15:50:00-04:00"},{"end":"2020-04-24T21:47:00-04:00","start":"2020-04-24T15:50:00-04:00"},{"end":"2020-04-27T21:47:00-04:00","start":"2020-04-27T15:50:00-04:00"},{"end":"2020-04-28T21:47:00-04:00","start":"2020-04-28T15:50:00-04:00"},{"end":"2020-04-29T21:47:00-04:00","start":"2020-04-29T15:50:00-04:00"},{"end":"2020-04-30T21:47:00-04:00","start":"2020-04-30T15:50:00-04:00"},{"end":"2020-05-01T21:47:00-04:00","start":"2020-05-01T15:50:00-04:00"},{"end":"2020-05-04T21:47:00-04:00","start":"2020-05-04T15:50:00-04:00"},{"end":"2020-05-05T21:47:00-04:00","start":"2020-05-05T15:50:00-04:00"},{"end":"2020-05-06T21:47:00-04:00","start":"2020-05-06T15:50:00-04:00"},{"end":"2020-05-07T21:47:00-04:00","start":"2020-05-07T15:50:00-04:00"},{"end":"2020-05-08T21:47:00-04:00","start":"2020-05-08T15:50:00-04:00"},{"end":"2020-05-11T21:47:00-04:00","start":"2020-05-11T15:50:00-04:00"},{"end":"2020-05-12T21:47:00-04:00","start":"2020-05-12T15:50:00-04:00"},{"end":"2020-05-13T21:47:00-04:00","start":"2020-05-13T15:50:00-04:00"},{"end":"2020-05-14T21:47:00-04:00","start":"2020-05-14T15:50:00-04:00"},{"end":"2020-05-15T21:47:00-04:00","start":"2020-05-15T15:50:00-04:00"},{"end":"2020-05-18T21:47:00-04:00","start":"2020-05-18T15:50:00-04:00"},{"end":"2020-05-19T21:47:00-04:00","start":"2020-05-19T15:50:00-04:00"},{"end":"2020-05-20T21:47:00-04:00","start":"2020-05-20T15:50:00-04:00"},{"end":"2020-05-21T21:47:00-04:00","start":"2020-05-21T15:50:00-04:00"},{"end":"2020-05-22T21:47:00-04:00","start":"2020-05-22T15:50:00-04:00"},{"end":"2020-05-25T21:47:00-04:00","start":"2020-05-25T15:50:00-04:00"},{"end":"2020-05-26T21:47:00-04:00","start":"2020-05-26T15:50:00-04:00"},{"end":"2020-05-27T21:47:00-04:00","start":"2020-05-27T15:50:00-04:00"},{"end":"2020-05-28T21:47:00-04:00","start":"2020-05-28T15:50:00-04:00"},{"end":"2020-05-29T21:47:00-04:00","start":"2020-05-29T15:50:00-04:00"},{"end":"2020-06-01T21:47:00-04:00","start":"2020-06-01T15:50:00-04:00"},{"end":"2020-06-02T21:47:00-04:00","start":"2020-06-02T15:50:00-04:00"},{"end":"2020-06-03T21:47:00-04:00","start":"2020-06-03T15:50:00-04:00"},{"end":"2020-06-04T21:47:00-04:00","start":"2020-06-04T15:50:00-04:00"},{"end":"2020-06-05T21:47:00-04:00","start":"2020-06-05T15:50:00-04:00"},{"end":"2020-06-08T21:47:00-04:00","start":"2020-06-08T15:50:00-04:00"},{"end":"2020-06-09T21:47:00-04:00","start":"2020-06-09T15:50:00-04:00"},{"end":"2020-06-10T21:47:00-04:00","start":"2020-06-10T15:50:00-04:00"},{"end":"2020-06-11T21:47:00-04:00","start":"2020-06-11T15:50:00-04:00"},{"end":"2020-06-12T21:47:00-04:00","start":"2020-06-12T15:50:00-04:00"},{"end":"2020-06-15T21:47:00-04:00","start":"2020-06-15T15:50:00-04:00"},{"end":"2020-06-16T21:47:00-04:00","start":"2020-06-16T15:50:00-04:00"},{"end":"2020-06-17T21:47:00-04:00","start":"2020-06-17T15:50:00-04:00"},{"end":"2020-06-18T21:47:00-04:00","start":"2020-06-18T15:50:00-04:00"},{"end":"2020-06-19T21:47:00-04:00","start":"2020-06-19T15:50:00-04:00"},{"end":"2020-06-22T21:47:00-04:00","start":"2020-06-22T15:50:00-04:00"},{"end":"2020-06-23T21:47:00-04:00","start":"2020-06-23T15:50:00-04:00"},{"end":"2020-06-24T21:47:00-04:00","start":"2020-06-24T15:50:00-04:00"},{"end":"2020-06-25T21:47:00-04:00","start":"2020-06-25T15:50:00-04:00"},{"end":"2020-06-26T21:47:00-04:00","start":"2020-06-26T15:50:00-04:00"},{"end":"2020-06-29T21:47:00-04:00","start":"2020-06-29T15:50:00-04:00"},{"end":"2020-06-30T21:47:00-04:00","start":"2020-06-30T15:50:00-04:00"},{"end":"2020-07-01T21:47:00-04:00","start":"2020-07-01T15:50:00-04:00"},{"end":"2020-07-02T21:47:00-04:00","start":"2020-07-02T15:50:00-04:00"},{"end":"2020-07-03T21:47:00-04:00","start":"2020-07-03T15:50:00-04:00"},{"end":"2020-07-06T21:47:00-04:00","start":"2020-07-06T15:50:00-04:00"},{"end":"2020-07-07T21:47:00-04:00","start":"2020-07-07T15:50:00-04:00"},{"end":"2020-07-08T21:47:00-04:00","start":"2020-07-08T15:50:00-04:00"},{"end":"2020-07-09T21:47:00-04:00","start":"2020-07-09T15:50:00-04:00"},{"end":"2020-07-10T21:47:00-04:00","start":"2020-07-10T15:50:00-04:00"},{"end":"2020-07-13T21:47:00-04:00","start":"2020-07-13T15:50:00-04:00"},{"end":"2020-07-14T21:47:00-04:00","start":"2020-07-14T15:50:00-04:00"},{"end":"2020-07-15T21:47:00-04:00","start":"2020-07-15T15:50:00-04:00"},{"end":"2020-07-16T21:47:00-04:00","start":"2020-07-16T15:50:00-04:00"},{"end":"2020-07-17T21:47:00-04:00","start":"2020-07-17T15:50:00-04:00"},{"end":"2020-07-20T21:47:00-04:00","start":"2020-07-20T15:50:00-04:00"},{"end":"2020-07-21T21:47:00-04:00","start":"2020-07-21T15:50:00-04:00"},{"end":"2020-07-22T21:47:00-04:00","start":"2020-07-22T15:50:00-04:00"},{"end":"2020-07-23T21:47:00-04:00","start":"2020-07-23T15:50:00-04:00"},{"end":"2020-07-24T21:47:00-04:00","start":"2020-07-24T15:50:00-04:00"},{"end":"2020-07-27T21:47:00-04:00","start":"2020-07-27T15:50:00-04:00"},{"end":"2020-07-28T21:47:00-04:00","start":"2020-07-28T15:50:00-04:00"},{"end":"2020-07-29T21:47:00-04:00","start":"2020-07-29T15:50:00-04:00"},{"end":"2020-07-30T21:47:00-04:00","start":"2020-07-30T15:50:00-04:00"},{"end":"2020-07-31T21:47:00-04:00","start":"2020-07-31T15:50:00-04:00"}],"banner":null,"cause":"UNKNOWN_CAUSE","created_at":"2018-09-26T14:49:25-04:00","description":"Please follow these boarding instructions Monday - Friday unless otherwise noted or if operating on a holiday schedule. \\r\\n\\r\\nAffected trips:\\r\\n520 (3:50 pm from Worcester)\\r\\n522 (5:20 pm from Worcester)\\r\\n592 (5:40 pm from Framingham)\\r\\n524 (6:05 pm from Worcester)\\r\\n594 (6:20 pm from Framingham)\\r\\n596 (7:05 pm from Framingham)\\r\\n526 (7:20 pm from Worcester)","effect":"TRACK_CHANGE","header":"Please board all peak inbound Worcester Line trains on the outbound platform at Lansdowne weekdays from 3:30 pm until 7:30 pm.","informed_entity":[{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"Yawkey","trip":"CR-Weekday-Spring-19-520"},{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"place-WML-0025","trip":"CR-Weekday-Spring-19-520"},{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"Yawkey","trip":"CR-Weekday-Spring-19-522"},{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"place-WML-0025","trip":"CR-Weekday-Spring-19-522"},{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"Yawkey","trip":"CR-Weekday-Spring-19-524"},{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"place-WML-0025","trip":"CR-Weekday-Spring-19-524"},{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"Yawkey","trip":"CR-Weekday-Spring-19-526"},{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"place-WML-0025","trip":"CR-Weekday-Spring-19-526"},{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"Yawkey","trip":"CR-Weekday-Spring-19-592"},{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"place-WML-0025","trip":"CR-Weekday-Spring-19-592"},{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"Yawkey","trip":"CR-Weekday-Spring-19-594"},{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"place-WML-0025","trip":"CR-Weekday-Spring-19-594"},{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"Yawkey","trip":"CR-Weekday-Spring-19-596"},{"activities":["BOARD"],"direction_id":1,"route":"CR-Worcester","route_type":2,"stop":"place-WML-0025","trip":"CR-Weekday-Spring-19-596"}],"lifecycle":"ONGOING_UPCOMING","service_effect":"Framingham/Worcester Line track change","severity":1,"short_header":"Please board all peak inbound Worcester Line trains on the outbound platform at Lansdowne weekdays from 3:30 pm until 7:30 pm.","timeframe":"ongoing","updated_at":"2019-07-25T16:21:16-04:00","url":null},"id":"270677","links":{"self":"/alerts/270677"},"type":"alert"},{"attributes":{"active_period":[{"end":null,"start":"2019-05-03T10:43:42-04:00"}],"banner":null,"cause":"UNKNOWN_CAUSE","created_at":"2019-05-03T10:43:43-04:00","description":"Affected direction: Inbound \\r\\n\\r\\nAffected stops: \\r\\nP St @ E 2nd St \\r\\n\\r\\nConnections: \\r\\nE 1st St @ O St \\r\\nP St @ E Broadway \\r\\nRoute 9# L St @ E 2nd St \\r\\nRoute #11 P St @ E 5th St","effect":"SERVICE_CHANGE","header":"Inbound routes 5, 7, 9, 10 & 11 detoured because of construction. Connections can be made at E 1st St @ O St, L St @ E 2nd St , P St @ E 5th St, P St @ E Broadway.","informed_entity":[{"activities":["BOARD","EXIT","RIDE"],"route":"10","route_type":3},{"activities":["BOARD","EXIT","RIDE"],"route":"11","route_type":3},{"activities":["BOARD","EXIT","RIDE"],"route":"5","route_type":3},{"activities":["BOARD","EXIT","RIDE"],"route":"7","route_type":3},{"activities":["BOARD","EXIT","RIDE"],"route":"9","route_type":3}],"lifecycle":"ONGOING","service_effect":"Bus notice","severity":5,"short_header":"Inb. rts. 5, 7, 9, 10 & 11 detoured because of construction. ","timeframe":"ongoing","updated_at":"2019-05-03T10:43:43-04:00","url":null},"id":"308506","links":{"self":"/alerts/308506"},"type":"alert"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.alert
            , testMany
                "many"
                "https://api-v3.mbta.com/alerts?filter[route]=Red,741"
                """
                {"data":[{"attributes":{"active_period":[{"end":null,"start":"2019-02-01T14:28:18-05:00"}],"banner":null,"cause":"UNKNOWN_CAUSE","created_at":"2019-02-01T14:28:28-05:00","description":"Access to the Kendall/MIT Station will remain open and accessible on the Main Street side of the station throughout this construction.\\r\\n \\r\\nThe pedestrian plaza between Carleton Street and Main Street in Kendall Square will be closed due to the construction of an underground garage. \\r\\n \\r\\nCustomers are encouraged to utilize alternative paths to/from the station using the paths on Ames Street, Dock Street, or Wadsworth Street.\\r\\n\\r\\nAffected routes:\\r\\nRed Line","effect":"STATION_ISSUE","header":"The pedestrian walkway near Kendall/MIT Station (inbound) is closed until further notice due to MIT construction.","informed_entity":[{"activities":["BOARD"],"route":"Red","route_type":1,"stop":"70071"},{"activities":["BOARD"],"route":"Red","route_type":1,"stop":"place-knncl"},{"activities":["BOARD"],"route":"Red","route_type":1,"stop":"70072"}],"lifecycle":"ONGOING","service_effect":"Change at Kendall/MIT","severity":1,"short_header":"The pedestrian walkway near Kendall/MIT Station (inbound) is closed until further notice due to MIT construction.","timeframe":"ongoing","updated_at":"2019-02-01T14:28:28-05:00","url":"https://courbanize.com/projects/mit-kendall-square/information"},"id":"293624","links":{"self":"/alerts/293624"},"type":"alert"},{"attributes":{"active_period":[{"end":null,"start":"2019-02-01T04:30:00-05:00"}],"banner":null,"cause":"UNKNOWN_CAUSE","created_at":"2019-02-01T14:30:57-05:00","description":"For access to Braintree Station, travel down to the first floor and use the pedestrian crosswalk to enter the station at the street level.\\r\\n\\r\\nThis construction is part of the South Shore Parking Garages Improvements and Renovations Project. The pedestrian bridge will be replaced by a new garage lobby featuring elevators and stairwells.\\r\\n\\r\\nAffected routes:\\r\\nRed Line\\r\\nNorth Quincy-Braintree shuttle\\r\\n230\\r\\n236\\r\\nMiddleborough/Lakeville Line\\r\\nKingston/Plymouth Line","effect":"STATION_ISSUE","header":"The pedestrian bridge at the Braintree Parking Garage is permanently closed due to garage renovations. MBTA.com/southshore","informed_entity":[{"activities":["BOARD"],"route":"Red","route_type":1,"stop":"70105"},{"activities":["BOARD"],"route":"Red","route_type":1,"stop":"place-brntn"},{"activities":["BOARD"],"route":"CR-Kingston","route_type":2,"stop":"Braintree"},{"activities":["BOARD"],"route":"CR-Kingston","route_type":2,"stop":"place-brntn"},{"activities":["BOARD"],"route":"CR-Middleborough","route_type":2,"stop":"Braintree"},{"activities":["BOARD"],"route":"CR-Middleborough","route_type":2,"stop":"place-brntn"},{"activities":["BOARD"],"route":"230","route_type":3,"stop":"38671"},{"activities":["BOARD"],"route":"230","route_type":3,"stop":"place-brntn"},{"activities":["BOARD"],"route":"236","route_type":3,"stop":"38671"},{"activities":["BOARD"],"route":"236","route_type":3,"stop":"place-brntn"}],"lifecycle":"ONGOING","service_effect":"Change at Braintree","severity":1,"short_header":"The pedestrian bridge at the Braintree Parking Garage is permanently closed due to garage renovations. MBTA.com/southshore","timeframe":"ongoing","updated_at":"2019-04-10T06:08:03-04:00","url":"https://www.mbta.com/southshore"},"id":"293625","links":{"self":"/alerts/293625"},"type":"alert"},{"attributes":{"active_period":[{"end":null,"start":"2019-02-01T14:26:59-05:00"}],"banner":null,"cause":"UNKNOWN_CAUSE","created_at":"2019-02-01T14:27:08-05:00","description":"Affected routes:\\r\\nRed Line","effect":"STATION_ISSUE","header":"During the construction at Quincy Center, use Hancock Street to pick-up or drop-off passengers. MBTA.com/southshore","informed_entity":[{"activities":["BOARD"],"route":"Red","route_type":1,"stop":"70101"},{"activities":["BOARD"],"route":"Red","route_type":1,"stop":"place-qnctr"},{"activities":["BOARD"],"route":"Red","route_type":1,"stop":"70102"}],"lifecycle":"ONGOING","service_effect":"Change at Quincy Center","severity":1,"short_header":"During the construction at Quincy Center, use Hancock Street to pick-up or drop-off passengers. MBTA.com/southshore","timeframe":"ongoing","updated_at":"2019-03-29T17:15:22-04:00","url":null},"id":"293623","links":{"self":"/alerts/293623"},"type":"alert"}],"jsonapi":{"version":"1.0"}}
                """
                Mbta.Decode.alert
            ]
        ]
